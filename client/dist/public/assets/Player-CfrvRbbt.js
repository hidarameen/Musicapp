import{c as x,u as I,Y as V,r as i,d as B,j as e,M as p,h as L,B as a,$ as N,a0 as R,a1 as A,a2 as E,P as $,a3 as H,a4 as q,a5 as D,H as U}from"./index-CQ1CQ49d.js";import{C as F,c as K}from"./card-DpWYKoFa.js";import{B as v}from"./badge-BdddEGjl.js";import{E as O}from"./ellipsis-CespXWWP.js";import{D as Q}from"./download-BPDawjom.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=x("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=x("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=x("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);function te(){const[,u]=I(),{currentSong:r,isPlaying:l,setIsPlaying:b}=V(),[h,d]=i.useState(0),[f,y]=i.useState(75),[j,w]=i.useState(!1),[c,k]=i.useState("none"),n=i.useRef(null),{data:m}=B({queryKey:["/api/artists"],staleTime:5*60*1e3}),M=t=>{if(!m||!Array.isArray(m))return"فنان غير معروف";const s=m.find(o=>o.id===t);return(s==null?void 0:s.name)||"فنان غير معروف"},z=()=>{n.current&&(l?n.current.pause():n.current.play(),b(!l))},g=t=>{const s=Math.floor(t/60),o=Math.floor(t%60);return`${s}:${o.toString().padStart(2,"0")}`},C=t=>{const s=t[0];d(s),n.current&&(n.current.currentTime=s)},S=t=>{const s=t[0];y(s),n.current&&(n.current.volume=s/100)},T=()=>{const t=["none","one","all"],o=(t.indexOf(c)+1)%t.length;k(t[o])},P=()=>{window.history.back()};return i.useEffect(()=>{r||u("/")},[r,u]),r?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900/20 via-background to-pink-900/20",children:[e.jsx("audio",{ref:n,src:r.audioUrl,onTimeUpdate:t=>d(t.currentTarget.currentTime),onLoadedMetadata:t=>d(0)}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(a,{variant:"ghost",size:"sm",onClick:P,"data-testid":"button-back",children:e.jsx(Y,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold",children:"مشغل الموسيقى"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"يتم التشغيل الآن"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{variant:"ghost",size:"sm","data-testid":"button-minimize",children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx(a,{variant:"ghost",size:"sm","data-testid":"button-more",children:e.jsx(O,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"max-w-2xl mx-auto p-8",children:e.jsx(F,{className:"overflow-hidden",children:e.jsxs(K,{className:"p-8",children:[e.jsx("div",{className:"aspect-square max-w-md mx-auto mb-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-2xl",children:e.jsx(p,{className:"w-32 h-32 text-white/80"})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2","data-testid":"text-song-title",children:r.title}),e.jsx("p",{className:"text-xl text-muted-foreground mb-4","data-testid":"text-artist-name",children:M(r.artistId)}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx(v,{variant:"secondary",children:"موسيقى عربية"}),e.jsx(v,{variant:"outline",children:"جودة عالية"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx(N,{value:[h],max:r.duration||100,step:1,onValueChange:C,className:"w-full mb-4","data-testid":"slider-progress"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsx("span",{"data-testid":"text-current-time",children:g(h)}),e.jsx("span",{"data-testid":"text-duration",children:g(r.duration||0)})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[e.jsx(a,{variant:"ghost",size:"lg",onClick:()=>w(!j),className:`transition-colors ${j?"text-primary":"text-muted-foreground hover:text-foreground"}`,"data-testid":"button-shuffle",children:e.jsx(R,{className:"w-6 h-6"})}),e.jsx(a,{variant:"ghost",size:"lg",className:"text-muted-foreground hover:text-foreground transition-colors","data-testid":"button-previous",children:e.jsx(A,{className:"w-8 h-8"})}),e.jsx(a,{onClick:z,size:"lg",className:"w-16 h-16 bg-primary rounded-full flex items-center justify-center hover:bg-primary/90 transition-all glow-effect transform hover:scale-105","data-testid":"button-play-pause",children:l?e.jsx(E,{className:"w-8 h-8 text-primary-foreground"}):e.jsx($,{className:"w-8 h-8 text-primary-foreground ml-1"})}),e.jsx(a,{variant:"ghost",size:"lg",className:"text-muted-foreground hover:text-foreground transition-colors","data-testid":"button-next",children:e.jsx(H,{className:"w-8 h-8"})}),e.jsxs(a,{variant:"ghost",size:"lg",onClick:T,className:`transition-colors ${c!=="none"?"text-primary":"text-muted-foreground hover:text-foreground"}`,"data-testid":"button-repeat",children:[e.jsx(q,{className:"w-6 h-6"}),c==="one"&&e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-primary rounded-full text-xs flex items-center justify-center text-primary-foreground",children:"1"})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[e.jsx(D,{className:"w-5 h-5 text-muted-foreground"}),e.jsx(N,{value:[f],max:100,step:1,onValueChange:S,className:"w-32","data-testid":"slider-volume"}),e.jsxs("span",{className:"text-sm text-muted-foreground w-8",children:[f,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs(a,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-red-500 transition-colors","data-testid":"button-favorite",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{className:"ml-2",children:"إضافة للمفضلة"})]}),e.jsxs(a,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground transition-colors","data-testid":"button-download",children:[e.jsx(Q,{className:"w-5 h-5"}),e.jsx("span",{className:"ml-2",children:"تحميل"})]}),e.jsxs(a,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground transition-colors","data-testid":"button-share",children:[e.jsx(J,{className:"w-5 h-5"}),e.jsx("span",{className:"ml-2",children:"مشاركة"})]})]})]})})})]}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(p,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"لا توجد أغنية قيد التشغيل"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"اختر أغنية للبدء في الاستماع"}),e.jsx(L,{to:"/",children:e.jsx(a,{children:"العودة للرئيسية"})})]})})}export{te as default};
