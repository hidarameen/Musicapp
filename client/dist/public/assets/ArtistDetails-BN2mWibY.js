import{c as J,U as X,r as c,j as e,n as Z,m as A,s as O,K as y,i as S,W as ee,Y as se,d as f,g as C,B as x,P as j,H as I,M as E}from"./index-CQ1CQ49d.js";import{C as b,c as w}from"./card-DpWYKoFa.js";import{T as ae,a as te,b as p,c as v}from"./tabs-3Ol6Aavg.js";import{B as R}from"./badge-BdddEGjl.js";import{S as U}from"./Sidebar-ChIl8nvY.js";import{S as re}from"./share-2-BbZeB6BH.js";import{V as $}from"./video-DTwUMtTX.js";import{D as le}from"./download-BPDawjom.js";import"./index-XX2ipCzA.js";import"./index-DVzphYQM.js";import"./search-CDKHGpBb.js";import"./users-D2wGyDQg.js";import"./disc-BNOE1RpA.js";import"./log-in-Y6tNToT0.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=J("Album",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["polyline",{points:"11 3 11 11 14 8 17 11 17 3",key:"1wcwz3"}]]);function ie(){return X.useSyncExternalStore(de,()=>!0,()=>!1)}function de(){return()=>{}}var L="Avatar",[ne,Se]=Z(L),[ce,T]=ne(L),q=c.forwardRef((a,t)=>{const{__scopeAvatar:i,...d}=a,[r,l]=c.useState("idle");return e.jsx(ce,{scope:i,imageLoadingStatus:r,onImageLoadingStatusChange:l,children:e.jsx(A.span,{...d,ref:t})})});q.displayName=L;var F="AvatarImage",K=c.forwardRef((a,t)=>{const{__scopeAvatar:i,src:d,onLoadingStatusChange:r=()=>{},...l}=a,o=T(F,i),n=oe(d,l),m=O(h=>{r(h),o.onImageLoadingStatusChange(h)});return y(()=>{n!=="idle"&&m(n)},[n,m]),n==="loaded"?e.jsx(A.img,{...l,ref:t,src:d}):null});K.displayName=F;var B="AvatarFallback",Y=c.forwardRef((a,t)=>{const{__scopeAvatar:i,delayMs:d,...r}=a,l=T(B,i),[o,n]=c.useState(d===void 0);return c.useEffect(()=>{if(d!==void 0){const m=window.setTimeout(()=>n(!0),d);return()=>window.clearTimeout(m)}},[d]),o&&l.imageLoadingStatus!=="loaded"?e.jsx(A.span,{...r,ref:t}):null});Y.displayName=B;function M(a,t){return a?t?(a.src!==t&&(a.src=t),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function oe(a,{referrerPolicy:t,crossOrigin:i}){const d=ie(),r=c.useRef(null),l=d?(r.current||(r.current=new window.Image),r.current):null,[o,n]=c.useState(()=>M(l,a));return y(()=>{n(M(l,a))},[l,a]),y(()=>{const m=N=>()=>{n(N)};if(!l)return;const h=m("loaded"),g=m("error");return l.addEventListener("load",h),l.addEventListener("error",g),t&&(l.referrerPolicy=t),typeof i=="string"&&(l.crossOrigin=i),()=>{l.removeEventListener("load",h),l.removeEventListener("error",g)}},[l,i,t]),o}var D=q,H=K,V=Y;const W=c.forwardRef(({className:a,...t},i)=>e.jsx(D,{ref:i,className:S("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t}));W.displayName=D.displayName;const G=c.forwardRef(({className:a,...t},i)=>e.jsx(H,{ref:i,className:S("aspect-square h-full w-full",a),...t}));G.displayName=H.displayName;const Q=c.forwardRef(({className:a,...t},i)=>e.jsx(V,{ref:i,className:S("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...t}));Q.displayName=V.displayName;function P(a){const t=Math.floor(a/60),i=a%60;return`${t}:${i.toString().padStart(2,"0")}`}function z(a){return a>=1e6?(a/1e6).toFixed(1)+" مليون":a>=1e3?(a/1e3).toFixed(1)+" ألف":a.toString()}function Le(){const t=ee().id,{setCurrentSong:i,setIsPlaying:d}=se(),{data:r,isLoading:l}=f({queryKey:["/api/artists",t],enabled:!!t}),{data:o=[],isLoading:n}=f({queryKey:["/api/artists",t,"songs"],enabled:!!t}),{data:m=[],isLoading:h}=f({queryKey:["/api/artists",t,"albums"],enabled:!!t}),{data:g=[],isLoading:N}=f({queryKey:["/api/artists",t,"videos"],enabled:!!t});if(l||!r)return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsx(U,{}),e.jsx("main",{className:"flex-1 mr-64 mb-24 overflow-y-auto",children:e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-64 bg-muted rounded-lg mb-8"}),e.jsx("div",{className:"h-8 bg-muted rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-muted rounded w-2/3"})]})})}),e.jsx(C,{})]});const k=s=>{s.audioUrl&&(i({id:s.id,title:s.title,artistId:s.artistId,audioUrl:s.audioUrl,duration:s.duration||0}),d(!0))};return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsx(U,{}),e.jsxs("main",{className:"flex-1 mr-64 mb-24 overflow-y-auto",children:[e.jsxs("div",{className:"relative h-80 bg-gradient-to-b from-primary/20 to-background",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:r.coverImageUrl?`url(${r.coverImageUrl})`:"none",filter:"brightness(0.3) blur(8px)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),e.jsx("div",{className:"relative h-full flex items-end p-8",children:e.jsxs("div",{className:"flex items-end space-x-6",children:[e.jsxs(W,{className:"w-40 h-40 border-4 border-white shadow-xl",children:[e.jsx(G,{src:r.profileImageUrl||"",alt:r.name}),e.jsx(Q,{className:"text-4xl font-bold bg-primary text-primary-foreground",children:r.name.split(" ").map(s=>s[0]).join("").slice(0,2)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(R,{variant:"secondary",className:"mb-2",children:"فنان"}),e.jsx("h1",{className:"text-5xl font-bold text-white mb-2","data-testid":"text-artist-name",children:r.name}),r.debutYear&&e.jsxs("p",{className:"text-white/80",children:["منذ عام ",r.debutYear]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[o.length>0&&e.jsxs(x,{size:"lg",className:"bg-primary hover:bg-primary/90",onClick:()=>k(o[0]),"data-testid":"button-play-all",children:[e.jsx(j,{className:"w-5 h-5 mr-2"}),"تشغيل"]}),e.jsxs(x,{variant:"outline",size:"lg","data-testid":"button-follow",children:[e.jsx(I,{className:"w-5 h-5 mr-2"}),"متابعة"]}),e.jsx(x,{variant:"ghost",size:"lg","data-testid":"button-share",children:e.jsx(re,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center space-x-6 text-white/80",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsxs("span",{children:[o.length," أغنية"]})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsxs("span",{children:[m.length," ألبوم"]})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx($,{className:"w-4 h-4"}),e.jsxs("span",{children:[g.length," فيديو"]})]})]})]})]})})]}),e.jsx("div",{className:"p-8",children:e.jsxs(ae,{defaultValue:"songs",className:"w-full",children:[e.jsxs(te,{className:"grid w-full grid-cols-4",children:[e.jsx(p,{value:"songs",children:"الأغاني"}),e.jsx(p,{value:"albums",children:"الألبومات"}),e.jsx(p,{value:"videos",children:"الفيديوهات"}),e.jsx(p,{value:"about",children:"نبذة"})]}),e.jsxs(v,{value:"songs",className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"الأغاني الشعبية"}),n?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((s,u)=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-muted rounded-lg animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 bg-background rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-background rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-background rounded w-1/4"})]})]},u))}):e.jsx("div",{className:"space-y-2",children:o.map((s,u)=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 rounded-lg hover:bg-muted transition-colors group cursor-pointer",onClick:()=>k(s),"data-testid":`song-item-${s.id}`,children:[e.jsx("div",{className:"w-8 text-center text-muted-foreground group-hover:hidden",children:u+1}),e.jsx(x,{size:"sm",variant:"ghost",className:"w-8 h-8 hidden group-hover:flex items-center justify-center",children:e.jsx(j,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-16 h-16 bg-muted rounded overflow-hidden",children:s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(E,{className:"w-6 h-6 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium","data-testid":`text-song-title-${s.id}`,children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[z(s.playCount)," تشغيل"]})]}),s.duration&&e.jsx("div",{className:"text-sm text-muted-foreground",children:P(s.duration)}),e.jsx(x,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100",children:e.jsx(I,{className:"w-4 h-4"})}),e.jsx(x,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100",children:e.jsx(le,{className:"w-4 h-4"})})]},s.id))})]}),e.jsxs(v,{value:"albums",className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"الألبومات"}),h?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:4}).map((s,u)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"aspect-square bg-muted rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]},u))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:m.map(s=>e.jsx(b,{className:"group cursor-pointer hover:shadow-lg transition-all","data-testid":`album-card-${s.id}`,onClick:()=>window.location.href=`/album/${s.id}`,children:e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"aspect-square bg-muted rounded-lg mb-4 overflow-hidden relative",children:[s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(_,{className:"w-12 h-12 text-muted-foreground"})}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(x,{size:"lg",className:"rounded-full",children:e.jsx(j,{className:"w-6 h-6"})})})]}),e.jsx("h3",{className:"font-semibold truncate","data-testid":`text-album-title-${s.id}`,children:s.title}),s.releaseYear&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.releaseYear})]})},s.id))})]}),e.jsxs(v,{value:"videos",className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"الفيديوهات"}),N?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((s,u)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"aspect-video bg-muted rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]},u))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(s=>e.jsx(b,{className:"group cursor-pointer hover:shadow-lg transition-all","data-testid":`video-card-${s.id}`,children:e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"aspect-video bg-muted rounded-lg mb-4 overflow-hidden relative",children:[s.thumbnailUrl?e.jsx("img",{src:s.thumbnailUrl,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx($,{className:"w-12 h-12 text-muted-foreground"})}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(x,{size:"lg",className:"rounded-full",children:e.jsx(j,{className:"w-6 h-6"})})}),s.duration&&e.jsx("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white px-2 py-1 rounded text-xs",children:P(s.duration)})]}),e.jsx("h3",{className:"font-semibold truncate mb-2","data-testid":`text-video-title-${s.id}`,children:s.title}),s.viewCount&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[z(s.viewCount)," مشاهدة"]})]})},s.id))})]}),e.jsxs(v,{value:"about",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"نبذة عن الفنان"}),e.jsx(b,{children:e.jsxs(w,{className:"p-6",children:[r.bio?e.jsx("p",{className:"text-muted-foreground leading-relaxed","data-testid":"text-artist-bio",children:r.bio}):e.jsx("p",{className:"text-muted-foreground italic",children:"لا توجد معلومات متاحة عن هذا الفنان حالياً."}),r.genres&&r.genres.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"الأنواع الموسيقية:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.genres.map((s,u)=>e.jsx(R,{variant:"secondary",children:s},u))})]})]})})]})]})})]}),e.jsx(C,{})]})}export{Le as default};
