import{c as F,r as l,j as e,i as f,k as E,u as M,l as L,e as w,M as T,B as p}from"./index-CQ1CQ49d.js";import{C as A,a as O,b as P,c as R}from"./card-DpWYKoFa.js";import{I as c}from"./input-qs3aDXbm.js";import{L as m}from"./label-Dtdxxf9X.js";import{E as q}from"./eye-1SJRzZGm.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=F("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),I=E("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),b=l.forwardRef(({className:r,variant:t,...n},o)=>e.jsx("div",{ref:o,role:"alert",className:f(I({variant:t}),r),...n}));b.displayName="Alert";const Q=l.forwardRef(({className:r,...t},n)=>e.jsx("h5",{ref:n,className:f("mb-1 font-medium leading-none tracking-tight",r),...t}));Q.displayName="AlertTitle";const C=l.forwardRef(({className:r,...t},n)=>e.jsx("div",{ref:n,className:f("text-sm [&_p]:leading-relaxed",r),...t}));C.displayName="AlertDescription";function H(){var y,N;const[,r]=M(),[t,n]=l.useState(!1),[o,k]=l.useState(!1),[i,d]=l.useState({username:"",password:"",email:"",firstName:"",lastName:""}),g=L(),u=w({mutationFn:async a=>{const s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){const x=await s.json();throw new Error(x.message)}return s.json()},onSuccess:()=>{g.invalidateQueries({queryKey:["/api/auth/user"]}),r("/")}}),h=w({mutationFn:async a=>{const s=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){const x=await s.json();throw new Error(x.message)}return s.json()},onSuccess:()=>{g.invalidateQueries({queryKey:["/api/auth/user"]}),r("/")}}),S=a=>{a.preventDefault(),t?h.mutate(i):u.mutate({username:i.username,password:i.password})},j=((y=u.error)==null?void 0:y.message)||((N=h.error)==null?void 0:N.message),v=u.isPending||h.isPending;return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs(A,{className:"w-full max-w-md",children:[e.jsxs(O,{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center space-x-3 mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-primary rounded-xl flex items-center justify-center",children:e.jsx(T,{className:"w-7 h-7 text-primary-foreground"})})}),e.jsx(P,{className:"text-2xl",children:t?"إنشاء حساب جديد":"تسجيل الدخول"})]}),e.jsxs(R,{children:[e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"username",children:"اسم المستخدم أو البريد الإلكتروني"}),e.jsx(c,{id:"username",type:"text",value:i.username,onChange:a=>d(s=>({...s,username:a.target.value})),required:!0,className:"mt-1",placeholder:"admin أو user@example.com"})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"email",children:"البريد الإلكتروني (اختياري)"}),e.jsx(c,{id:"email",type:"email",value:i.email,onChange:a=>d(s=>({...s,email:a.target.value})),className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"firstName",children:"الاسم الأول"}),e.jsx(c,{id:"firstName",type:"text",value:i.firstName,onChange:a=>d(s=>({...s,firstName:a.target.value})),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"lastName",children:"الاسم الأخير"}),e.jsx(c,{id:"lastName",type:"text",value:i.lastName,onChange:a=>d(s=>({...s,lastName:a.target.value})),className:"mt-1"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"password",children:"كلمة المرور"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(c,{id:"password",type:o?"text":"password",value:i.password,onChange:a=>d(s=>({...s,password:a.target.value})),required:!0}),e.jsx(p,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>k(!o),children:o?e.jsx(D,{className:"h-4 w-4"}):e.jsx(q,{className:"h-4 w-4"})})]})]}),j&&e.jsx(b,{variant:"destructive",children:e.jsx(C,{children:j})}),e.jsx(p,{type:"submit",className:"w-full",disabled:v,children:v?"جاري التحميل...":t?"إنشاء الحساب":"تسجيل الدخول"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(p,{type:"button",variant:"link",onClick:()=>n(!t),className:"text-sm",children:t?"لديك حساب بالفعل؟ سجل الدخول":"ليس لديك حساب؟ أنشئ حساب جديد"})})]})]})})}export{H as default};
