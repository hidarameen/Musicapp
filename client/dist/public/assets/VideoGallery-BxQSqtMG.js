import{r as u,j as e,B as n,P as w,X as y}from"./index-CQ1CQ49d.js";import{S as c}from"./skeleton-CIS5eNOV.js";import{D as $,a as A,b as k,c as D}from"./dialog-g6WB_omj.js";import{b as C,a as M}from"./useAppData-CRUzGfia.js";import{E as f}from"./eye-1SJRzZGm.js";import"./index-DVzphYQM.js";import"./index-C5XG4sJr.js";function P(){const[a,j]=u.useState(null),[p,d]=u.useState(!1),{data:r,isLoading:g}=C(),{data:o,isLoading:N}=M(),m=s=>{if(!o||!Array.isArray(o))return"فنان غير معروف";const t=o.find(i=>i.id===s);return(t==null?void 0:t.name)||"فنان غير معروف"},b=s=>{const t=Math.floor(s/60),i=s%60;return`${t}:${i.toString().padStart(2,"0")}`},x=s=>s>=1e6?`${(s/1e6).toFixed(1)}M مشاهدة`:s>=1e3?`${(s/1e3).toFixed(1)}K مشاهدة`:`${s} مشاهدة`,h=s=>{const t=new Date,i=new Date(s),l=Math.floor((t.getTime()-i.getTime())/(1e3*60*60*24));return l===0?"اليوم":l===1?"أمس":l<7?`منذ ${l} أيام`:l<30?`منذ ${Math.floor(l/7)} أسابيع`:`منذ ${Math.floor(l/30)} شهر`},v=s=>{const t=r==null?void 0:r.find(i=>i.id===s);t&&(j(t),d(!0))};return g||N?e.jsxs("section",{className:"px-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"الفيديوهات الموسيقية"}),e.jsx(n,{variant:"ghost",className:"text-primary hover:text-primary/80 transition-colors",children:"عرض الكل"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(3)].map((s,t)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{className:"w-full aspect-video rounded-xl"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"h-4 w-3/4"}),e.jsx(c,{className:"h-3 w-1/2"}),e.jsx(c,{className:"h-3 w-1/3"})]})]},t))})]}):!r||!Array.isArray(r)||r.length===0?e.jsxs("section",{className:"px-6 mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h2",{className:"text-2xl font-bold",children:"الفيديوهات الموسيقية"})}),e.jsx("div",{className:"bg-card rounded-xl p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"لا توجد فيديوهات متاحة حالياً"})})]}):e.jsxs("section",{className:"px-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"الفيديوهات الموسيقية"}),e.jsx(n,{variant:"ghost",className:"text-primary hover:text-primary/80 transition-colors",children:"عرض الكل"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.slice(0,3).map(s=>e.jsxs("div",{className:"group cursor-pointer hover-scale",onClick:()=>v(s.id),"data-testid":`card-video-${s.id}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.thumbnailUrl||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400",alt:`${s.title} Thumbnail`,className:"w-full aspect-video object-cover rounded-xl"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-all duration-300 rounded-xl flex items-center justify-center",children:e.jsx(n,{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center transform scale-0 group-hover:scale-100 transition-transform duration-300 glow-effect","data-testid":`button-play-video-${s.id}`,children:e.jsx(w,{className:"w-6 h-6 text-white ml-1"})})}),e.jsx("div",{className:"absolute bottom-3 right-3 bg-black/70 text-white px-2 py-1 rounded text-xs",children:b(s.duration)})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"font-semibold truncate","data-testid":`text-video-title-${s.id}`,children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground truncate","data-testid":`text-video-artist-${s.id}`,children:m(s.artistId)}),e.jsxs("div",{className:"flex items-center mt-2 text-xs text-muted-foreground",children:[e.jsx(f,{className:"w-3 h-3 mr-1"}),e.jsx("span",{"data-testid":`text-view-count-${s.id}`,children:x(s.viewCount)}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{"data-testid":`text-video-date-${s.id}`,children:h(s.createdAt)})]})]})]},s.id))}),e.jsx($,{open:p,onOpenChange:d,children:e.jsxs(A,{className:"max-w-4xl max-h-[80vh] p-0 bg-black border-0",children:[e.jsx(k,{className:"p-4 bg-black text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(D,{className:"text-white",children:a==null?void 0:a.title}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>d(!1),className:"text-white hover:bg-white/20",children:e.jsx(y,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"aspect-video bg-black",children:a&&e.jsxs("video",{controls:!0,autoPlay:!0,className:"w-full h-full",poster:a.thumbnailUrl,children:[e.jsx("source",{src:a.videoUrl,type:"video/mp4"}),"متصفحك لا يدعم تشغيل الفيديو"]})}),a&&e.jsxs("div",{className:"p-4 bg-card text-foreground",children:[e.jsx("h3",{className:"font-semibold mb-2",children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:m(a.artistId)}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:x(a.viewCount)})]}),e.jsx("span",{children:h(a.createdAt)})]})]})]})})]})}export{P as default};
