import{c as $e,n as Ue,r as s,o as Yt,p as Be,s as ze,t as Ht,j as t,v as Xt,A as Wt,w as J,x as Qt,y as G,z as g,m as T,C as Zt,D as Jt,E as en,F as tn,G as nn,I as qe,J as rn,i as _,a as on,b as an,d as Y,e as be,B as R,M as ie,P as je,H as Ne,q as H,f as Ce}from"./index-CQ1CQ49d.js";import{C as sn,aO as cn,aX as _e,aP as dn,aQ as Re,aR as De,aS as Pe,aT as Se,aU as Ie,aV as ln,aW as un,aY as pn,aZ as Ee,as as mn,aG as Te}from"./authUtils-Cwid23vT.js";import{C as X,a as Ae,b as Oe,c as ke}from"./card-DpWYKoFa.js";import{I as fn}from"./input-qs3aDXbm.js";import{S as Le}from"./skeleton-CIS5eNOV.js";import{B as Fe}from"./badge-BdddEGjl.js";import{D as xn,d as hn,a as gn,b as vn,c as wn}from"./dialog-g6WB_omj.js";import{h as Mn,u as yn,R as bn,F as jn}from"./index-C5XG4sJr.js";import{c as Ve,I as Nn,R as Cn}from"./index-XX2ipCzA.js";import{u as Ge}from"./index-DVzphYQM.js";import{C as _n}from"./check-C9F5kHoc.js";import{E as Rn}from"./ellipsis-CespXWWP.js";import{S as Dn}from"./share-2-BbZeB6BH.js";import{T as Pn}from"./trash-2-CJoP-qv4.js";import"./label-Dtdxxf9X.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=$e("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=$e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var ce=["Enter"," "],En=["ArrowDown","PageUp","Home"],Ye=["ArrowUp","PageDown","End"],Tn=[...En,...Ye],An={ltr:[...ce,"ArrowRight"],rtl:[...ce,"ArrowLeft"]},On={ltr:["ArrowLeft"],rtl:["ArrowRight"]},K="Menu",[L,kn,Ln]=Yt(K),[D,He]=Ue(K,[Ln,Be,Ve]),ee=Be(),Xe=Ve(),[Fn,P]=D(K),[Gn,$]=D(K),We=e=>{const{__scopeMenu:r,open:n=!1,children:o,dir:a,onOpenChange:i,modal:l=!0}=e,u=ee(r),[x,h]=s.useState(null),f=s.useRef(!1),d=ze(i),m=Ht(a);return s.useEffect(()=>{const v=()=>{f.current=!0,document.addEventListener("pointerdown",c,{capture:!0,once:!0}),document.addEventListener("pointermove",c,{capture:!0,once:!0})},c=()=>f.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",c,{capture:!0}),document.removeEventListener("pointermove",c,{capture:!0})}},[]),t.jsx(Xt,{...u,children:t.jsx(Fn,{scope:r,open:n,onOpenChange:d,content:x,onContentChange:h,children:t.jsx(Gn,{scope:r,onClose:s.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:m,modal:l,children:o})})})};We.displayName=K;var Kn="MenuAnchor",de=s.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e,a=ee(n);return t.jsx(Wt,{...a,...o,ref:r})});de.displayName=Kn;var le="MenuPortal",[$n,Qe]=D(le,{forceMount:void 0}),Ze=e=>{const{__scopeMenu:r,forceMount:n,children:o,container:a}=e,i=P(le,r);return t.jsx($n,{scope:r,forceMount:n,children:t.jsx(J,{present:n||i.open,children:t.jsx(Qt,{asChild:!0,container:a,children:o})})})};Ze.displayName=le;var b="MenuContent",[Un,ue]=D(b),Je=s.forwardRef((e,r)=>{const n=Qe(b,e.__scopeMenu),{forceMount:o=n.forceMount,...a}=e,i=P(b,e.__scopeMenu),l=$(b,e.__scopeMenu);return t.jsx(L.Provider,{scope:e.__scopeMenu,children:t.jsx(J,{present:o||i.open,children:t.jsx(L.Slot,{scope:e.__scopeMenu,children:l.modal?t.jsx(Bn,{...a,ref:r}):t.jsx(zn,{...a,ref:r})})})})}),Bn=s.forwardRef((e,r)=>{const n=P(b,e.__scopeMenu),o=s.useRef(null),a=G(r,o);return s.useEffect(()=>{const i=o.current;if(i)return Mn(i)},[]),t.jsx(pe,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:g(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),zn=s.forwardRef((e,r)=>{const n=P(b,e.__scopeMenu);return t.jsx(pe,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),qn=Jt("MenuContent.ScrollLock"),pe=s.forwardRef((e,r)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:x,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:m,onDismiss:v,disableOutsideScroll:c,...w}=e,S=P(b,n),A=$(b,n),U=ee(n),B=Xe(n),he=kn(n),[$t,ge]=s.useState(null),z=s.useRef(null),Ut=G(r,z,S.onContentChange),q=s.useRef(0),V=s.useRef(""),Bt=s.useRef(0),re=s.useRef(null),ve=s.useRef("right"),oe=s.useRef(0),zt=c?bn:s.Fragment,qt=c?{as:qn,allowPinchZoom:!0}:void 0,Vt=p=>{var E,Me;const y=V.current+p,j=he().filter(N=>!N.disabled),C=document.activeElement,ae=(E=j.find(N=>N.ref.current===C))==null?void 0:E.textValue,se=j.map(N=>N.textValue),we=rr(se,y,ae),O=(Me=j.find(N=>N.textValue===we))==null?void 0:Me.ref.current;(function N(ye){V.current=ye,window.clearTimeout(q.current),ye!==""&&(q.current=window.setTimeout(()=>N(""),1e3))})(y),O&&setTimeout(()=>O.focus())};s.useEffect(()=>()=>window.clearTimeout(q.current),[]),yn();const I=s.useCallback(p=>{var j,C;return ve.current===((j=re.current)==null?void 0:j.side)&&ar(p,(C=re.current)==null?void 0:C.area)},[]);return t.jsx(Un,{scope:n,searchRef:V,onItemEnter:s.useCallback(p=>{I(p)&&p.preventDefault()},[I]),onItemLeave:s.useCallback(p=>{var y;I(p)||((y=z.current)==null||y.focus(),ge(null))},[I]),onTriggerLeave:s.useCallback(p=>{I(p)&&p.preventDefault()},[I]),pointerGraceTimerRef:Bt,onPointerGraceIntentChange:s.useCallback(p=>{re.current=p},[]),children:t.jsx(zt,{...qt,children:t.jsx(jn,{asChild:!0,trapped:a,onMountAutoFocus:g(i,p=>{var y;p.preventDefault(),(y=z.current)==null||y.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:t.jsx(en,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:m,onDismiss:v,children:t.jsx(Cn,{asChild:!0,...B,dir:A.dir,orientation:"vertical",loop:o,currentTabStopId:$t,onCurrentTabStopIdChange:ge,onEntryFocus:g(x,p=>{A.isUsingKeyboardRef.current||p.preventDefault()}),preventScrollOnEntryFocus:!0,children:t.jsx(tn,{role:"menu","aria-orientation":"vertical","data-state":xt(S.open),"data-radix-menu-content":"",dir:A.dir,...U,...w,ref:Ut,style:{outline:"none",...w.style},onKeyDown:g(w.onKeyDown,p=>{const j=p.target.closest("[data-radix-menu-content]")===p.currentTarget,C=p.ctrlKey||p.altKey||p.metaKey,ae=p.key.length===1;j&&(p.key==="Tab"&&p.preventDefault(),!C&&ae&&Vt(p.key));const se=z.current;if(p.target!==se||!Tn.includes(p.key))return;p.preventDefault();const O=he().filter(E=>!E.disabled).map(E=>E.ref.current);Ye.includes(p.key)&&O.reverse(),tr(O)}),onBlur:g(e.onBlur,p=>{p.currentTarget.contains(p.target)||(window.clearTimeout(q.current),V.current="")}),onPointerMove:g(e.onPointerMove,F(p=>{const y=p.target,j=oe.current!==p.clientX;if(p.currentTarget.contains(y)&&j){const C=p.clientX>oe.current?"right":"left";ve.current=C,oe.current=p.clientX}}))})})})})})})});Je.displayName=b;var Vn="MenuGroup",me=s.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e;return t.jsx(T.div,{role:"group",...o,ref:r})});me.displayName=Vn;var Yn="MenuLabel",et=s.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e;return t.jsx(T.div,{...o,ref:r})});et.displayName=Yn;var Q="MenuItem",Ke="menu.itemSelect",te=s.forwardRef((e,r)=>{const{disabled:n=!1,onSelect:o,...a}=e,i=s.useRef(null),l=$(Q,e.__scopeMenu),u=ue(Q,e.__scopeMenu),x=G(r,i),h=s.useRef(!1),f=()=>{const d=i.current;if(!n&&d){const m=new CustomEvent(Ke,{bubbles:!0,cancelable:!0});d.addEventListener(Ke,v=>o==null?void 0:o(v),{once:!0}),Zt(d,m),m.defaultPrevented?h.current=!1:l.onClose()}};return t.jsx(tt,{...a,ref:x,disabled:n,onClick:g(e.onClick,f),onPointerDown:d=>{var m;(m=e.onPointerDown)==null||m.call(e,d),h.current=!0},onPointerUp:g(e.onPointerUp,d=>{var m;h.current||(m=d.currentTarget)==null||m.click()}),onKeyDown:g(e.onKeyDown,d=>{const m=u.searchRef.current!=="";n||m&&d.key===" "||ce.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});te.displayName=Q;var tt=s.forwardRef((e,r)=>{const{__scopeMenu:n,disabled:o=!1,textValue:a,...i}=e,l=ue(Q,n),u=Xe(n),x=s.useRef(null),h=G(r,x),[f,d]=s.useState(!1),[m,v]=s.useState("");return s.useEffect(()=>{const c=x.current;c&&v((c.textContent??"").trim())},[i.children]),t.jsx(L.ItemSlot,{scope:n,disabled:o,textValue:a??m,children:t.jsx(Nn,{asChild:!0,...u,focusable:!o,children:t.jsx(T.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...i,ref:h,onPointerMove:g(e.onPointerMove,F(c=>{o?l.onItemLeave(c):(l.onItemEnter(c),c.defaultPrevented||c.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:g(e.onPointerLeave,F(c=>l.onItemLeave(c))),onFocus:g(e.onFocus,()=>d(!0)),onBlur:g(e.onBlur,()=>d(!1))})})})}),Hn="MenuCheckboxItem",nt=s.forwardRef((e,r)=>{const{checked:n=!1,onCheckedChange:o,...a}=e;return t.jsx(it,{scope:e.__scopeMenu,checked:n,children:t.jsx(te,{role:"menuitemcheckbox","aria-checked":Z(n)?"mixed":n,...a,ref:r,"data-state":xe(n),onSelect:g(a.onSelect,()=>o==null?void 0:o(Z(n)?!0:!n),{checkForDefaultPrevented:!1})})})});nt.displayName=Hn;var rt="MenuRadioGroup",[Xn,Wn]=D(rt,{value:void 0,onValueChange:()=>{}}),ot=s.forwardRef((e,r)=>{const{value:n,onValueChange:o,...a}=e,i=ze(o);return t.jsx(Xn,{scope:e.__scopeMenu,value:n,onValueChange:i,children:t.jsx(me,{...a,ref:r})})});ot.displayName=rt;var at="MenuRadioItem",st=s.forwardRef((e,r)=>{const{value:n,...o}=e,a=Wn(at,e.__scopeMenu),i=n===a.value;return t.jsx(it,{scope:e.__scopeMenu,checked:i,children:t.jsx(te,{role:"menuitemradio","aria-checked":i,...o,ref:r,"data-state":xe(i),onSelect:g(o.onSelect,()=>{var l;return(l=a.onValueChange)==null?void 0:l.call(a,n)},{checkForDefaultPrevented:!1})})})});st.displayName=at;var fe="MenuItemIndicator",[it,Qn]=D(fe,{checked:!1}),ct=s.forwardRef((e,r)=>{const{__scopeMenu:n,forceMount:o,...a}=e,i=Qn(fe,n);return t.jsx(J,{present:o||Z(i.checked)||i.checked===!0,children:t.jsx(T.span,{...a,ref:r,"data-state":xe(i.checked)})})});ct.displayName=fe;var Zn="MenuSeparator",dt=s.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e;return t.jsx(T.div,{role:"separator","aria-orientation":"horizontal",...o,ref:r})});dt.displayName=Zn;var Jn="MenuArrow",lt=s.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e,a=ee(n);return t.jsx(nn,{...a,...o,ref:r})});lt.displayName=Jn;var er="MenuSub",[po,ut]=D(er),k="MenuSubTrigger",pt=s.forwardRef((e,r)=>{const n=P(k,e.__scopeMenu),o=$(k,e.__scopeMenu),a=ut(k,e.__scopeMenu),i=ue(k,e.__scopeMenu),l=s.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:x}=i,h={__scopeMenu:e.__scopeMenu},f=s.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return s.useEffect(()=>f,[f]),s.useEffect(()=>{const d=u.current;return()=>{window.clearTimeout(d),x(null)}},[u,x]),t.jsx(de,{asChild:!0,...h,children:t.jsx(tt,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":xt(n.open),...e,ref:qe(r,a.onTriggerChange),onClick:d=>{var m;(m=e.onClick)==null||m.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:g(e.onPointerMove,F(d=>{i.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:g(e.onPointerLeave,F(d=>{var v,c;f();const m=(v=n.content)==null?void 0:v.getBoundingClientRect();if(m){const w=(c=n.content)==null?void 0:c.dataset.side,S=w==="right",A=S?-5:5,U=m[S?"left":"right"],B=m[S?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+A,y:d.clientY},{x:U,y:m.top},{x:B,y:m.top},{x:B,y:m.bottom},{x:U,y:m.bottom}],side:w}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:g(e.onKeyDown,d=>{var v;const m=i.searchRef.current!=="";e.disabled||m&&d.key===" "||An[o.dir].includes(d.key)&&(n.onOpenChange(!0),(v=n.content)==null||v.focus(),d.preventDefault())})})})});pt.displayName=k;var mt="MenuSubContent",ft=s.forwardRef((e,r)=>{const n=Qe(b,e.__scopeMenu),{forceMount:o=n.forceMount,...a}=e,i=P(b,e.__scopeMenu),l=$(b,e.__scopeMenu),u=ut(mt,e.__scopeMenu),x=s.useRef(null),h=G(r,x);return t.jsx(L.Provider,{scope:e.__scopeMenu,children:t.jsx(J,{present:o||i.open,children:t.jsx(L.Slot,{scope:e.__scopeMenu,children:t.jsx(pe,{id:u.contentId,"aria-labelledby":u.triggerId,...a,ref:h,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var d;l.isUsingKeyboardRef.current&&((d=x.current)==null||d.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:g(e.onFocusOutside,f=>{f.target!==u.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:g(e.onEscapeKeyDown,f=>{l.onClose(),f.preventDefault()}),onKeyDown:g(e.onKeyDown,f=>{var v;const d=f.currentTarget.contains(f.target),m=On[l.dir].includes(f.key);d&&m&&(i.onOpenChange(!1),(v=u.trigger)==null||v.focus(),f.preventDefault())})})})})})});ft.displayName=mt;function xt(e){return e?"open":"closed"}function Z(e){return e==="indeterminate"}function xe(e){return Z(e)?"indeterminate":e?"checked":"unchecked"}function tr(e){const r=document.activeElement;for(const n of e)if(n===r||(n.focus(),document.activeElement!==r))return}function nr(e,r){return e.map((n,o)=>e[(r+o)%e.length])}function rr(e,r,n){const a=r.length>1&&Array.from(r).every(h=>h===r[0])?r[0]:r,i=n?e.indexOf(n):-1;let l=nr(e,Math.max(i,0));a.length===1&&(l=l.filter(h=>h!==n));const x=l.find(h=>h.toLowerCase().startsWith(a.toLowerCase()));return x!==n?x:void 0}function or(e,r){const{x:n,y:o}=e;let a=!1;for(let i=0,l=r.length-1;i<r.length;l=i++){const u=r[i],x=r[l],h=u.x,f=u.y,d=x.x,m=x.y;f>o!=m>o&&n<(d-h)*(o-f)/(m-f)+h&&(a=!a)}return a}function ar(e,r){if(!r)return!1;const n={x:e.clientX,y:e.clientY};return or(n,r)}function F(e){return r=>r.pointerType==="mouse"?e(r):void 0}var sr=We,ir=de,cr=Ze,dr=Je,lr=me,ur=et,pr=te,mr=nt,fr=ot,xr=st,hr=ct,gr=dt,vr=lt,wr=pt,Mr=ft,ne="DropdownMenu",[yr,mo]=Ue(ne,[He]),M=He(),[br,ht]=yr(ne),gt=e=>{const{__scopeDropdownMenu:r,children:n,dir:o,open:a,defaultOpen:i,onOpenChange:l,modal:u=!0}=e,x=M(r),h=s.useRef(null),[f,d]=rn({prop:a,defaultProp:i??!1,onChange:l,caller:ne});return t.jsx(br,{scope:r,triggerId:Ge(),triggerRef:h,contentId:Ge(),open:f,onOpenChange:d,onOpenToggle:s.useCallback(()=>d(m=>!m),[d]),modal:u,children:t.jsx(sr,{...x,open:f,onOpenChange:d,dir:o,modal:u,children:n})})};gt.displayName=ne;var vt="DropdownMenuTrigger",wt=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...a}=e,i=ht(vt,n),l=M(n);return t.jsx(ir,{asChild:!0,...l,children:t.jsx(T.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...a,ref:qe(r,i.triggerRef),onPointerDown:g(e.onPointerDown,u=>{!o&&u.button===0&&u.ctrlKey===!1&&(i.onOpenToggle(),i.open||u.preventDefault())}),onKeyDown:g(e.onKeyDown,u=>{o||(["Enter"," "].includes(u.key)&&i.onOpenToggle(),u.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});wt.displayName=vt;var jr="DropdownMenuPortal",Mt=e=>{const{__scopeDropdownMenu:r,...n}=e,o=M(r);return t.jsx(cr,{...o,...n})};Mt.displayName=jr;var yt="DropdownMenuContent",bt=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=ht(yt,n),i=M(n),l=s.useRef(!1);return t.jsx(dr,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...o,ref:r,onCloseAutoFocus:g(e.onCloseAutoFocus,u=>{var x;l.current||(x=a.triggerRef.current)==null||x.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:g(e.onInteractOutside,u=>{const x=u.detail.originalEvent,h=x.button===0&&x.ctrlKey===!0,f=x.button===2||h;(!a.modal||f)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bt.displayName=yt;var Nr="DropdownMenuGroup",Cr=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=M(n);return t.jsx(lr,{...a,...o,ref:r})});Cr.displayName=Nr;var _r="DropdownMenuLabel",jt=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=M(n);return t.jsx(ur,{...a,...o,ref:r})});jt.displayName=_r;var Rr="DropdownMenuItem",Nt=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=M(n);return t.jsx(pr,{...a,...o,ref:r})});Nt.displayName=Rr;var Dr="DropdownMenuCheckboxItem",Ct=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=M(n);return t.jsx(mr,{...a,...o,ref:r})});Ct.displayName=Dr;var Pr="DropdownMenuRadioGroup",Sr=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=M(n);return t.jsx(fr,{...a,...o,ref:r})});Sr.displayName=Pr;var Ir="DropdownMenuRadioItem",_t=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=M(n);return t.jsx(xr,{...a,...o,ref:r})});_t.displayName=Ir;var Er="DropdownMenuItemIndicator",Rt=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=M(n);return t.jsx(hr,{...a,...o,ref:r})});Rt.displayName=Er;var Tr="DropdownMenuSeparator",Dt=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=M(n);return t.jsx(gr,{...a,...o,ref:r})});Dt.displayName=Tr;var Ar="DropdownMenuArrow",Or=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=M(n);return t.jsx(vr,{...a,...o,ref:r})});Or.displayName=Ar;var kr="DropdownMenuSubTrigger",Pt=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=M(n);return t.jsx(wr,{...a,...o,ref:r})});Pt.displayName=kr;var Lr="DropdownMenuSubContent",St=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,a=M(n);return t.jsx(Mr,{...a,...o,ref:r,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});St.displayName=Lr;var Fr=gt,Gr=wt,Kr=Mt,It=bt,Et=jt,Tt=Nt,At=Ct,Ot=_t,kt=Rt,Lt=Dt,Ft=Pt,Gt=St;const $r=Fr,Ur=Gr,Br=s.forwardRef(({className:e,inset:r,children:n,...o},a)=>t.jsxs(Ft,{ref:a,className:_("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",e),...o,children:[n,t.jsx(sn,{className:"ml-auto"})]}));Br.displayName=Ft.displayName;const zr=s.forwardRef(({className:e,...r},n)=>t.jsx(Gt,{ref:n,className:_("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...r}));zr.displayName=Gt.displayName;const Kt=s.forwardRef(({className:e,sideOffset:r=4,...n},o)=>t.jsx(Kr,{children:t.jsx(It,{ref:o,sideOffset:r,className:_("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));Kt.displayName=It.displayName;const W=s.forwardRef(({className:e,inset:r,...n},o)=>t.jsx(Tt,{ref:o,className:_("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",e),...n}));W.displayName=Tt.displayName;const qr=s.forwardRef(({className:e,children:r,checked:n,...o},a)=>t.jsxs(At,{ref:a,className:_("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...o,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(kt,{children:t.jsx(_n,{className:"h-4 w-4"})})}),r]}));qr.displayName=At.displayName;const Vr=s.forwardRef(({className:e,children:r,...n},o)=>t.jsxs(Ot,{ref:o,className:_("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(kt,{children:t.jsx(Sn,{className:"h-2 w-2 fill-current"})})}),r]}));Vr.displayName=Ot.displayName;const Yr=s.forwardRef(({className:e,inset:r,...n},o)=>t.jsx(Et,{ref:o,className:_("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",e),...n}));Yr.displayName=Et.displayName;const Hr=s.forwardRef(({className:e,...r},n)=>t.jsx(Lt,{ref:n,className:_("-mx-1 my-1 h-px bg-muted",e),...r}));Hr.displayName=Lt.displayName;const Xr=mn({name:Te().min(1,"اسم قائمة التشغيل مطلوب"),description:Te().optional()});function fo(){const{user:e}=on(),{toast:r}=an(),[n,o]=s.useState(!1),a=cn({resolver:pn(Xr),defaultValues:{name:"",description:""}}),{data:i,isLoading:l}=Y({queryKey:["/api/users",e==null?void 0:e.id,"playlists"],enabled:!!(e!=null&&e.id)}),{data:u,isLoading:x}=Y({queryKey:["/api/playlists"]}),{data:h}=Y({queryKey:["/api/artists"]}),{data:f}=Y({queryKey:["/api/songs"]}),d=be({mutationFn:async c=>{await Ce("POST","/api/playlists",{...c,userId:e==null?void 0:e.id,isPublic:!1})},onSuccess:()=>{H.invalidateQueries({queryKey:["/api/users",e==null?void 0:e.id,"playlists"]}),H.invalidateQueries({queryKey:["/api/playlists"]}),a.reset(),o(!1),r({title:"تم إنشاء قائمة التشغيل",description:"تم إنشاء قائمة التشغيل بنجاح"})},onError:c=>{if(Ee(c)){r({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}r({title:"خطأ",description:"فشل في إنشاء قائمة التشغيل",variant:"destructive"})}}),m=be({mutationFn:async c=>{await Ce("DELETE",`/api/playlists/${c}`)},onSuccess:()=>{H.invalidateQueries({queryKey:["/api/users",e==null?void 0:e.id,"playlists"]}),H.invalidateQueries({queryKey:["/api/playlists"]}),r({title:"تم حذف قائمة التشغيل",description:"تم حذف قائمة التشغيل بنجاح"})},onError:c=>{if(Ee(c)){r({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}r({title:"خطأ",description:"فشل في حذف قائمة التشغيل",variant:"destructive"})}}),v=c=>[];return t.jsx("div",{className:"min-h-screen bg-background text-foreground",children:t.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold mb-2 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"قوائم التشغيل"}),t.jsx("p",{className:"text-muted-foreground",children:"أنشئ وأدر قوائم التشغيل الخاصة بك واستكشف قوائم المستخدمين الآخرين"})]}),t.jsxs(xn,{open:n,onOpenChange:o,children:[t.jsx(hn,{asChild:!0,children:t.jsxs(R,{className:"bg-primary hover:bg-primary/90","data-testid":"button-create-playlist",children:[t.jsx(_e,{className:"w-4 h-4 mr-2"}),"إنشاء قائمة تشغيل"]})}),t.jsxs(gn,{className:"max-w-md",children:[t.jsx(vn,{children:t.jsx(wn,{children:"إنشاء قائمة تشغيل جديدة"})}),t.jsx(dn,{...a,children:t.jsxs("form",{onSubmit:a.handleSubmit(c=>d.mutate(c)),className:"space-y-4",children:[t.jsx(Re,{control:a.control,name:"name",render:({field:c})=>t.jsxs(De,{children:[t.jsx(Pe,{children:"اسم قائمة التشغيل"}),t.jsx(Se,{children:t.jsx(fn,{placeholder:"أدخل اسم قائمة التشغيل",...c,"data-testid":"input-playlist-name"})}),t.jsx(Ie,{})]})}),t.jsx(Re,{control:a.control,name:"description",render:({field:c})=>t.jsxs(De,{children:[t.jsx(Pe,{children:"الوصف (اختياري)"}),t.jsx(Se,{children:t.jsx(ln,{placeholder:"أدخل وصف قائمة التشغيل...",rows:3,...c,"data-testid":"textarea-playlist-description"})}),t.jsx(Ie,{})]})}),t.jsxs("div",{className:"flex gap-2 pt-4",children:[t.jsx(R,{type:"submit",className:"flex-1",disabled:d.isPending,"data-testid":"button-submit-playlist",children:d.isPending?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"إنشاء..."]}):"إنشاء قائمة التشغيل"}),t.jsx(R,{type:"button",variant:"outline",onClick:()=>o(!1),"data-testid":"button-cancel-playlist",children:"إلغاء"})]})]})})]})]})]}),e&&t.jsxs("div",{className:"mb-12",children:[t.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[t.jsx(In,{className:"w-6 h-6"}),"قوائم التشغيل الخاصة بك"]}),l?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(4)].map((c,w)=>t.jsx(Le,{className:"h-64 w-full"},w))}):i&&Array.isArray(i)&&i.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:i.map(c=>{const w=v(c.id||"");return t.jsxs(X,{className:"group hover:bg-card/80 transition-all duration-200 cursor-pointer","data-testid":`card-playlist-${c.id}`,children:[t.jsx(Ae,{className:"pb-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx(Oe,{className:"text-lg mb-1 truncate",children:c.name}),c.description&&t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:c.description})]}),t.jsxs($r,{children:[t.jsx(Ur,{asChild:!0,children:t.jsx(R,{size:"sm",variant:"ghost",className:"opacity-0 group-hover:opacity-100 transition-opacity","data-testid":`dropdown-playlist-${c.id}`,children:t.jsx(Rn,{className:"w-4 h-4"})})}),t.jsxs(Kt,{align:"end",children:[t.jsxs(W,{children:[t.jsx(un,{className:"w-4 h-4 mr-2"}),"تعديل"]}),t.jsxs(W,{children:[t.jsx(Dn,{className:"w-4 h-4 mr-2"}),"مشاركة"]}),t.jsxs(W,{className:"text-red-600 focus:text-red-600",onClick:()=>c.id&&m.mutate(c.id),disabled:m.isPending,children:[t.jsx(Pn,{className:"w-4 h-4 mr-2"}),"حذف"]})]})]})]})}),t.jsxs(ke,{className:"pt-0",children:[t.jsxs("div",{className:"aspect-square bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg mb-4 flex items-center justify-center relative overflow-hidden",children:[t.jsx(ie,{className:"w-12 h-12 text-white"}),t.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:t.jsx(R,{size:"sm",className:"rounded-full w-12 h-12 p-0",children:t.jsx(je,{className:"w-5 h-5"})})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[t.jsxs("span",{children:[w.length," أغنية"]}),c.isPublic&&t.jsx(Fe,{variant:"secondary",children:"عامة"})]}),c.createdAt&&t.jsxs("p",{className:"text-xs text-muted-foreground",children:["أُنشئت في ",new Date(c.createdAt).toLocaleDateString("ar-EG")]})]})]})]},c.id)})}):t.jsxs(X,{className:"p-8 text-center",children:[t.jsx(ie,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-xl font-semibold mb-2",children:"لا توجد قوائم تشغيل"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:"أنشئ قائمة التشغيل الأولى لتجميع أغانيك المفضلة"}),t.jsxs(R,{onClick:()=>o(!0),children:[t.jsx(_e,{className:"w-4 h-4 mr-2"}),"إنشاء قائمة تشغيل"]})]})]}),t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[t.jsx(Ne,{className:"w-6 h-6"}),"قوائم التشغيل المُوصى بها"]}),x?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((c,w)=>t.jsx(Le,{className:"h-64 w-full"},w))}):u&&Array.isArray(u)&&u.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:u.map(c=>{const w=v(c.id||"");return t.jsxs(X,{className:"group hover:bg-card/80 transition-all duration-200 cursor-pointer","data-testid":`card-public-playlist-${c.id}`,children:[t.jsxs(Ae,{className:"pb-3",children:[t.jsx(Oe,{className:"text-lg mb-1 truncate",children:c.name}),c.description&&t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:c.description})]}),t.jsxs(ke,{className:"pt-0",children:[t.jsxs("div",{className:"aspect-square bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg mb-4 flex items-center justify-center relative overflow-hidden",children:[t.jsx(ie,{className:"w-12 h-12 text-white"}),t.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:t.jsx(R,{size:"sm",className:"rounded-full w-12 h-12 p-0",children:t.jsx(je,{className:"w-5 h-5"})})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[t.jsxs("span",{children:[w.length," أغنية"]}),t.jsx(Fe,{variant:"secondary",children:"عامة"})]}),c.createdAt&&t.jsxs("p",{className:"text-xs text-muted-foreground",children:["أُنشئت في ",new Date(c.createdAt).toLocaleDateString("ar-EG")]})]})]})]},c.id)})}):t.jsxs(X,{className:"p-8 text-center",children:[t.jsx(Ne,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-xl font-semibold mb-2",children:"لا توجد قوائم تشغيل عامة"}),t.jsx("p",{className:"text-muted-foreground",children:"لا توجد قوائم تشغيل عامة متاحة حالياً"})]})]})]})})}export{fo as default};
