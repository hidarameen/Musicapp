import{c as k,W as C,Y as I,d as u,j as e,g as f,M as o,B as i,P as p,H as N}from"./index-BEosjvFY.js";import{C as D,c as S}from"./card-DjIf65r2.js";import{B as M}from"./badge-D52QBSsT.js";import{S as v}from"./Sidebar-DlaXlCOU.js";import{S as U}from"./share-2-Cf6vwVXV.js";import{D as j}from"./download-CXu8oPbW.js";import{C as P}from"./search-DeohbOdD.js";import"./users-CyOdMYj1.js";import"./disc-bvSIxYzJ.js";import"./video-B9ELjgIP.js";import"./log-in-C_8GnUY0.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=k("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);function $(t){const l=Math.floor(t/60),d=t%60;return`${l}:${d.toString().padStart(2,"0")}`}function L(t){return t>=1e6?(t/1e6).toFixed(1)+" مليون":t>=1e3?(t/1e3).toFixed(1)+" ألف":t.toString()}function B(t){const l=t.reduce((s,m)=>s+(m.duration||0),0),d=Math.floor(l/3600),n=Math.floor(l%3600/60);return d>0?`${d} ساعة ${n} دقيقة`:`${n} دقيقة`}function _(){const l=C().id,{setCurrentSong:d,setIsPlaying:n}=I(),{data:s,isLoading:m}=u({queryKey:["/api/albums",l],enabled:!!l}),{data:c,isLoading:b}=u({queryKey:["/api/artists",s==null?void 0:s.artistId],enabled:!!(s!=null&&s.artistId)}),{data:r=[],isLoading:w}=u({queryKey:["/api/albums",l,"songs"],enabled:!!l});if(m||!s)return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsx(v,{}),e.jsx("main",{className:"flex-1 mr-64 mb-24 overflow-y-auto",children:e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-64 bg-muted rounded-lg mb-8"}),e.jsx("div",{className:"h-8 bg-muted rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-muted rounded w-2/3"})]})})}),e.jsx(f,{})]});const g=a=>{a.audioUrl&&(d({id:a.id,title:a.title,artistId:a.artistId||"",audioUrl:a.audioUrl,duration:a.duration||0}),n(!0))},y=()=>{r.length>0&&r[0].audioUrl&&g(r[0])};return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsx(v,{}),e.jsxs("main",{className:"flex-1 mr-64 mb-24 overflow-y-auto",children:[e.jsxs("div",{className:"relative h-80 bg-gradient-to-b from-primary/20 to-background",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:s.coverImageUrl?`url(${s.coverImageUrl})`:"none",filter:"brightness(0.3) blur(8px)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),e.jsx("div",{className:"relative h-full flex items-end p-8",children:e.jsxs("div",{className:"flex items-end space-x-6",children:[e.jsx("div",{className:"w-56 h-56 bg-muted rounded-lg overflow-hidden shadow-2xl",children:s.coverImageUrl?e.jsx("img",{src:s.coverImageUrl,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(o,{className:"w-20 h-20 text-muted-foreground"})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(M,{variant:"secondary",className:"mb-2",children:"ألبوم"}),e.jsx("h1",{className:"text-5xl font-bold text-white mb-2","data-testid":"text-album-title",children:s.title}),!b&&c&&e.jsx("p",{className:"text-xl text-white/80 mb-2",children:c.name}),s.releaseDate&&e.jsxs("p",{className:"text-white/70",children:["صدر في عام ",new Date(s.releaseDate).getFullYear()]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(i,{size:"lg",className:"bg-primary hover:bg-primary/90",onClick:y,disabled:r.length===0,"data-testid":"button-play-all",children:[e.jsx(p,{className:"w-5 h-5 mr-2"}),"تشغيل"]}),e.jsxs(i,{variant:"outline",size:"lg","data-testid":"button-favorite",children:[e.jsx(N,{className:"w-5 h-5 mr-2"}),"إضافة للمفضلة"]}),e.jsx(i,{variant:"ghost",size:"lg","data-testid":"button-share",children:e.jsx(U,{className:"w-5 h-5"})}),e.jsx(i,{variant:"ghost",size:"lg","data-testid":"button-download",children:e.jsx(j,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center space-x-6 text-white/80",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(o,{className:"w-4 h-4"}),e.jsxs("span",{children:[r.length," أغنية"]})]}),r.length>0&&e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{children:B(r)})]}),s.releaseDate&&e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.releaseDate).getFullYear()})]})]})]})]})})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"قائمة الأغاني"}),r.length>0&&e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"تحميل الألبوم"]})})]}),w?e.jsx("div",{className:"space-y-4",children:Array.from({length:8}).map((a,x)=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-muted rounded-lg animate-pulse",children:[e.jsx("div",{className:"w-8 h-4 bg-background rounded"}),e.jsx("div",{className:"w-16 h-16 bg-background rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-background rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-background rounded w-1/4"})]}),e.jsx("div",{className:"w-12 h-4 bg-background rounded"})]},x))}):r.length===0?e.jsx(D,{children:e.jsxs(S,{className:"p-12 text-center",children:[e.jsx(o,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"لا توجد أغاني"}),e.jsx("p",{className:"text-muted-foreground",children:"لم يتم إضافة أي أغاني لهذا الألبوم بعد."})]})}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-[auto,1fr,auto,auto] gap-4 px-4 py-2 text-sm text-muted-foreground border-b",children:[e.jsx("div",{className:"w-8",children:"#"}),e.jsx("div",{children:"العنوان"}),e.jsx("div",{className:"text-center",children:"الاستماع"}),e.jsx("div",{className:"text-center",children:"المدة"})]}),r.map((a,x)=>e.jsxs("div",{className:"grid grid-cols-[auto,1fr,auto,auto] gap-4 p-4 rounded-lg hover:bg-muted transition-colors group cursor-pointer",onClick:()=>g(a),"data-testid":`song-item-${a.id}`,children:[e.jsx("div",{className:"w-8 text-center text-muted-foreground group-hover:hidden flex items-center justify-center",children:x+1}),e.jsx(i,{size:"sm",variant:"ghost",className:"w-8 h-8 hidden group-hover:flex items-center justify-center",children:e.jsx(p,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-center space-x-4 min-w-0",children:[e.jsx("div",{className:"w-12 h-12 bg-muted rounded overflow-hidden flex-shrink-0",children:s.coverImageUrl?e.jsx("img",{src:s.coverImageUrl,alt:a.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(o,{className:"w-4 h-4 text-muted-foreground"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-medium truncate","data-testid":`text-song-title-${a.id}`,children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:(c==null?void 0:c.name)||"فنان غير معروف"})]})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:L(a.playCount||0)}),e.jsx(i,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100",onClick:h=>h.stopPropagation(),children:e.jsx(N,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.duration&&e.jsx("span",{className:"text-sm text-muted-foreground",children:$(a.duration)}),e.jsx(i,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100",onClick:h=>h.stopPropagation(),children:e.jsx(j,{className:"w-4 h-4"})})]})]},a.id))]})]})]}),e.jsx(f,{})]})}export{_ as default};
