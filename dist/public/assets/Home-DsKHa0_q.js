const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TrendingSection-DwpXB3qp.js","assets/index-BEosjvFY.js","assets/index--rbhISq3.css","assets/skeleton-BGX3xLQu.js","assets/useAppData-Sij5uDJ1.js","assets/ArtistsSection-BXvaBb9L.js","assets/VideoGallery-D_86Ac51.js","assets/dialog-CL3c_Vhd.js","assets/index-CXlEOQ-e.js","assets/index-Ctp2OgOU.js","assets/eye-B40Lyt_S.js","assets/PlaylistsSection-B9WXYM2l.js","assets/input-_8EU6oC7.js","assets/authUtils-EEMWuqft.js","assets/label-Bb24f0Ie.js","assets/Sidebar-DlaXlCOU.js","assets/search-DeohbOdD.js","assets/users-CyOdMYj1.js","assets/disc-bvSIxYzJ.js","assets/video-B9ELjgIP.js","assets/download-CXu8oPbW.js","assets/log-in-C_8GnUY0.js","assets/tabs-B7vLysKc.js","assets/index-Cut7O9C5.js","assets/select-D9-QZINv.js","assets/check-BsigYy_i.js","assets/card-DjIf65r2.js","assets/badge-D52QBSsT.js","assets/trash-2-Bn_GtgkO.js"])))=>i.map(i=>d[i]);
var Al=Object.defineProperty;var _l=(r,e,t)=>e in r?Al(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var a=(r,e,t)=>_l(r,typeof e!="symbol"?e+"":e,t);import{c as rs,r as M,u as Dl,R as Fl,j as s,a as xn,b as fn,d as Ne,e as X,M as Xe,B as O,P as yn,q as G,f as W,H as Vl,L as Ul,g as El,_ as qe}from"./index-BEosjvFY.js";import{U as Ge,S as Ll}from"./Sidebar-DlaXlCOU.js";import{I as L}from"./input-_8EU6oC7.js";import{C as ql,B as zl,D as Bl,E as Ml,I as Ql,N as Ol,O as $l,P as Kl,Z as Je,a as Zl,b as Rl,c as Xl,d as Gl,e as Jl,f as Hl,g as Yl,h as Wl,i as kl,j as fs,k as eo,l as so,m as to,n as ro,o as io,p as no,q as ao,r as lo,s as oo,t as co,u as uo,v as mo,w as ho,x as po,y as go,z as xo,A as fo,F as yo,G as jo,H as bo,J as No,K as vo,L as wo,M as So,Q as To,R as Io,S as Po,T as Co,U as Ao,V as _o,W as Do,X as Fe,Y as jn,_ as Fo,$ as bn,a0 as Vo,a1 as Nn,a2 as Uo,a3 as Eo,a4 as Lo,a5 as qo,a6 as ys,a7 as zo,a8 as Bo,a9 as Mo,aa as Qo,ab as Oo,ac as $o,ad as Ko,ae as Zo,af as Ro,ag as Xo,ah as Go,ai as Jo,aj as Ho,ak as Yo,al as Wo,am as ko,an as ec,ao as sc,ap as vn,aq as tc,ar as wn,as as ze,at as rc,au as ic,av as nc,aw as ac,ax as lc,ay as oc,az as cc,aA as dc,aB as uc,aC as Sn,aD as mc,aE as hc,aF as pc,aG as _,aH as gc,aI as xc,aJ as fc,aK as is,aL as yc,aM as jc,aN as bc,aO as ve,aP as we,aQ as D,aR as F,aS as V,aT as U,aU as E,aV as js,aW as ge,aX as Nc,aY as Se,aZ as se}from"./authUtils-EEMWuqft.js";import{S as vc,C as wc}from"./search-DeohbOdD.js";import{S as P}from"./skeleton-BGX3xLQu.js";import{D as Sc,a as Tc,b as Ic,c as Pc}from"./dialog-CL3c_Vhd.js";import{T as bs,a as Ns,b as te,c as re}from"./tabs-B7vLysKc.js";import{S as Te,a as Ie,b as Pe,c as Ce,d as le}from"./select-D9-QZINv.js";import{C as z,a as H,b as Y,c as B}from"./card-DjIf65r2.js";import{B as xe}from"./badge-D52QBSsT.js";import{V as He}from"./video-B9ELjgIP.js";import{U as k}from"./users-CyOdMYj1.js";import{D as Ye}from"./disc-bvSIxYzJ.js";import{T as Ae}from"./trash-2-Bn_GtgkO.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=rs("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=rs("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=rs("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);function Dc(r,e){const[t,i]=M.useState(r);return M.useEffect(()=>{const l=setTimeout(()=>{i(r)},e);return()=>{clearTimeout(l)}},[r,e]),t}function Fc(){const[r,e]=M.useState(""),t=Dc(r,300),[,i]=Dl(),l=c=>{c.preventDefault(),r.trim()&&i(`/search?q=${encodeURIComponent(r.trim())}`)};return Fl.useEffect(()=>{t.trim()&&t.length>2&&i(`/search?q=${encodeURIComponent(t.trim())}`)},[t,i]),s.jsx("header",{className:"sticky top-0 z-40 bg-background/80 backdrop-blur-xl border-b border-border p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{className:"p-2 rounded-lg hover:bg-muted transition-colors","data-testid":"button-back",children:s.jsx(Ac,{className:"w-5 h-5"})}),s.jsx("button",{className:"p-2 rounded-lg hover:bg-muted transition-colors","data-testid":"button-forward",children:s.jsx(ql,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 max-w-md mx-8",children:s.jsxs("form",{onSubmit:l,className:"relative",children:[s.jsx(vc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(L,{type:"text",placeholder:"ابحث عن الأغاني أو الفنانين...",value:r,onChange:c=>e(c.target.value),className:"w-full pl-10 pr-4 py-3 bg-input border border-border rounded-xl focus:ring-2 focus:ring-ring focus:border-transparent transition-all","data-testid":"input-search"})]})}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsx("button",{className:"p-2 rounded-lg hover:bg-muted transition-colors","data-testid":"button-notifications",children:s.jsx(Cc,{className:"w-5 h-5"})})})]})})}const Vc=Object.freeze(Object.defineProperty({__proto__:null,BRAND:zl,DIRTY:Bl,EMPTY_PATH:Ml,INVALID:Ql,NEVER:Ol,OK:$l,ParseStatus:Kl,Schema:Je,ZodAny:Zl,ZodArray:Rl,ZodBigInt:Xl,ZodBoolean:Gl,ZodBranded:Jl,ZodCatch:Hl,ZodDate:Yl,ZodDefault:Wl,ZodDiscriminatedUnion:kl,ZodEffects:fs,ZodEnum:eo,ZodError:so,get ZodFirstPartyTypeKind(){return to},ZodFunction:ro,ZodIntersection:io,ZodIssueCode:no,ZodLazy:ao,ZodLiteral:lo,ZodMap:oo,ZodNaN:co,ZodNativeEnum:uo,ZodNever:mo,ZodNull:ho,ZodNullable:po,ZodNumber:go,ZodObject:xo,ZodOptional:fo,ZodParsedType:yo,ZodPipeline:jo,ZodPromise:bo,ZodReadonly:No,ZodRecord:vo,ZodSchema:Je,ZodSet:wo,ZodString:So,ZodSymbol:To,ZodTransformer:fs,ZodTuple:Io,ZodType:Je,ZodUndefined:Po,ZodUnion:Co,ZodUnknown:Ao,ZodVoid:_o,addIssueToContext:Do,any:Fe,array:jn,bigint:Fo,boolean:bn,coerce:Vo,custom:Nn,date:Uo,datetimeRegex:Eo,defaultErrorMap:Lo,discriminatedUnion:qo,effect:ys,enum:zo,function:Bo,getErrorMap:Mo,getParsedType:Qo,instanceof:Oo,intersection:$o,isAborted:Ko,isAsync:Zo,isDirty:Ro,isValid:Xo,late:Go,lazy:Jo,literal:Ho,makeIssue:Yo,map:Wo,nan:ko,nativeEnum:ec,never:sc,null:vn,nullable:tc,number:wn,object:ze,get objectUtil(){return rc},oboolean:ic,onumber:nc,optional:ac,ostring:lc,pipeline:oc,preprocess:cc,promise:dc,quotelessJson:uc,record:Sn,set:mc,setErrorMap:hc,strictObject:pc,string:_,symbol:gc,transformer:ys,tuple:xc,undefined:fc,union:is,unknown:yc,get util(){return jc},void:bc},Symbol.toStringTag,{value:"Module"})),o=Symbol.for("drizzle:entityKind");function C(r,e){if(!r||typeof r!="object")return!1;if(r instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,o))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(r).constructor;if(t)for(;t;){if(o in t&&t[o]===e[o])return!0;t=Object.getPrototypeOf(t)}return!1}var As;As=o;class de{constructor(e,t){a(this,"name");a(this,"keyAsName");a(this,"primary");a(this,"notNull");a(this,"default");a(this,"defaultFn");a(this,"onUpdateFn");a(this,"hasDefault");a(this,"isUnique");a(this,"uniqueName");a(this,"uniqueType");a(this,"dataType");a(this,"columnType");a(this,"enumValues");a(this,"generated");a(this,"generatedIdentity");a(this,"config");this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}a(de,As,"Column");var _s;_s=o;class Tn{constructor(e,t,i){a(this,"config");a(this,"$default",this.$defaultFn);a(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:i,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}a(Tn,_s,"ColumnBuilder");const oe=Symbol.for("drizzle:Name");var Ds;Ds=o;class In{constructor(e,t){a(this,"reference");a(this,"_onUpdate","no action");a(this,"_onDelete","no action");this.reference=()=>{const{name:i,columns:l,foreignColumns:c}=e();return{name:i,columns:l,foreignTable:c[0].table,foreignColumns:c}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new Pn(e,this)}}a(In,Ds,"PgForeignKeyBuilder");var Fs;Fs=o;class Pn{constructor(e,t){a(this,"reference");a(this,"onUpdate");a(this,"onDelete");this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}getName(){const{name:e,columns:t,foreignColumns:i}=this.reference(),l=t.map(g=>g.name),c=i.map(g=>g.name),m=[this.table[oe],...l,i[0].table[oe],...c];return e??`${m.join("_")}_fk`}}a(Pn,Fs,"PgForeignKey");function Uc(r,...e){return r(...e)}function Ec(r,e){return`${r[oe]}_${e.join("_")}_unique`}function vs(r,e,t){for(let i=e;i<r.length;i++){const l=r[i];if(l==="\\"){i++;continue}if(l==='"')return[r.slice(e,i).replace(/\\/g,""),i+1];if(!t&&(l===","||l==="}"))return[r.slice(e,i).replace(/\\/g,""),i]}return[r.slice(e).replace(/\\/g,""),r.length]}function Cn(r,e=0){const t=[];let i=e,l=!1;for(;i<r.length;){const c=r[i];if(c===","){(l||i===e)&&t.push(""),l=!0,i++;continue}if(l=!1,c==="\\"){i+=2;continue}if(c==='"'){const[x,b]=vs(r,i+1,!0);t.push(x),i=b;continue}if(c==="}")return[t,i+1];if(c==="{"){const[x,b]=Cn(r,i+1);t.push(x),i=b;continue}const[m,g]=vs(r,i,!1);t.push(m),i=g}return[t,i]}function Lc(r){const[e]=Cn(r,1);return e}function An(r){return`{${r.map(e=>Array.isArray(e)?An(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var Vs,Us;class j extends(Us=Tn,Vs=o,Us){constructor(){super(...arguments);a(this,"foreignKeyConfigs",[])}array(t){return new Dn(this.config.name,this,t)}references(t,i={}){return this.foreignKeyConfigs.push({ref:t,actions:i}),this}unique(t,i){return this.config.isUnique=!0,this.config.uniqueName=t,this.config.uniqueType=i==null?void 0:i.nulls,this}generatedAlwaysAs(t){return this.config.generated={as:t,type:"always",mode:"stored"},this}buildForeignKeys(t,i){return this.foreignKeyConfigs.map(({ref:l,actions:c})=>Uc((m,g)=>{const x=new In(()=>{const b=m();return{columns:[t],foreignColumns:[b]}});return g.onUpdate&&x.onUpdate(g.onUpdate),g.onDelete&&x.onDelete(g.onDelete),x.build(i)},l,c))}buildExtraConfigColumn(t){return new _n(t,this.config)}}a(j,Vs,"PgColumnBuilder");var Es,Ls;class h extends(Ls=de,Es=o,Ls){constructor(e,t){t.uniqueName||(t.uniqueName=Ec(e,[t.name])),super(e,t),this.table=e}}a(h,Es,"PgColumn");var qs,zs;class _n extends(zs=h,qs=o,zs){constructor(){super(...arguments);a(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});a(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(t){return this.indexConfig.opClass=t,this}}a(_n,qs,"ExtraConfigColumn");var Bs;Bs=o;class _e{constructor(e,t,i,l){a(this,"name");a(this,"keyAsName");a(this,"type");a(this,"indexConfig");this.name=e,this.keyAsName=t,this.type=i,this.indexConfig=l}}a(_e,Bs,"IndexedColumn");var Ms,Qs;class Dn extends(Qs=j,Ms=o,Qs){constructor(e,t,i){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=i}build(e){const t=this.config.baseBuilder.build(e);return new ss(e,this.config,t)}}a(Dn,Ms,"PgArrayBuilder");var Os,$s;const Le=class Le extends($s=h,Os=o,$s){constructor(t,i,l,c){super(t,i);a(this,"size");this.baseColumn=l,this.range=c,this.size=i.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(t){return typeof t=="string"&&(t=Lc(t)),t.map(i=>this.baseColumn.mapFromDriverValue(i))}mapToDriverValue(t,i=!1){const l=t.map(c=>c===null?null:C(this.baseColumn,Le)?this.baseColumn.mapToDriverValue(c,!0):this.baseColumn.mapToDriverValue(c));return i?l:An(l)}};a(Le,Os,"PgArray");let ss=Le;const ws=Symbol.for("drizzle:isPgEnum");function qc(r){return!!r&&typeof r=="function"&&ws in r&&r[ws]===!0}var Ks;Ks=o;class ns{constructor(e,t,i,l=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:i,isWith:l}}}a(ns,Ks,"Subquery");const zc={startActiveSpan(r,e){return e()}},ce=Symbol.for("drizzle:ViewBaseConfig"),We=Symbol.for("drizzle:Schema"),Ss=Symbol.for("drizzle:Columns"),Ts=Symbol.for("drizzle:ExtraConfigColumns"),ke=Symbol.for("drizzle:OriginalName"),es=Symbol.for("drizzle:BaseName"),Ve=Symbol.for("drizzle:IsAlias"),Is=Symbol.for("drizzle:ExtraConfigBuilder"),Fn=Symbol.for("drizzle:IsDrizzleTable");var Zs,Rs,Xs,Gs,Js,Hs,Ys,Ws,ks,et;et=o,ks=oe,Ws=ke,Ys=We,Hs=Ss,Js=Ts,Gs=es,Xs=Ve,Rs=Fn,Zs=Is;class Q{constructor(e,t,i){a(this,ks);a(this,Ws);a(this,Ys);a(this,Hs);a(this,Js);a(this,Gs);a(this,Xs,!1);a(this,Rs,!0);a(this,Zs);this[oe]=this[ke]=e,this[We]=t,this[es]=i}}a(Q,et,"Table"),a(Q,"Symbol",{Name:oe,Schema:We,OriginalName:ke,Columns:Ss,ExtraConfigColumns:Ts,BaseName:es,IsAlias:Ve,ExtraConfigBuilder:Is});function Vn(r){return typeof r=="object"&&r!==null&&Fn in r}function Bc(r){return r!=null&&typeof r.getSQL=="function"}function Mc(r){var t;const e={sql:"",params:[]};for(const i of r)e.sql+=i.sql,e.params.push(...i.params),(t=i.typings)!=null&&t.length&&(e.typings||(e.typings=[]),e.typings.push(...i.typings));return e}var st;st=o;class K{constructor(e){a(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new S([this])}}a(K,st,"StringChunk");var tt;tt=o;const ne=class ne{constructor(e){a(this,"decoder",Un);a(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return zc.startActiveSpan("drizzle.buildSQL",t=>{const i=this.buildQueryFromSourceParams(this.queryChunks,e);return t==null||t.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i})}buildQueryFromSourceParams(e,t){const i=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:l,escapeName:c,escapeParam:m,prepareTyping:g,inlineParams:x,paramStartIndex:b}=i;return Mc(e.map(u=>{var A;if(C(u,K))return{sql:u.value.join(""),params:[]};if(C(u,Ue))return{sql:c(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const p=[new K("(")];for(const[N,T]of u.entries())p.push(T),N<u.length-1&&p.push(new K(", "));return p.push(new K(")")),this.buildQueryFromSourceParams(p,i)}if(C(u,ne))return this.buildQueryFromSourceParams(u.queryChunks,{...i,inlineParams:x||u.shouldInlineParams});if(C(u,Q)){const p=u[Q.Symbol.Schema],N=u[Q.Symbol.Name];return{sql:p===void 0||u[Ve]?c(N):c(p)+"."+c(N),params:[]}}if(C(u,de)){const p=l.getColumnCasing(u);if(t.invokeSource==="indexes")return{sql:c(p),params:[]};const N=u.table[Q.Symbol.Schema];return{sql:u.table[Ve]||N===void 0?c(u.table[Q.Symbol.Name])+"."+c(p):c(N)+"."+c(u.table[Q.Symbol.Name])+"."+c(p),params:[]}}if(C(u,qn)){const p=u[ce].schema,N=u[ce].name;return{sql:p===void 0||u[ce].isAlias?c(N):c(p)+"."+c(N),params:[]}}if(C(u,as)){if(C(u.value,Ee))return{sql:m(b.value++,u),params:[u],typings:["none"]};const p=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(C(p,ne))return this.buildQueryFromSourceParams([p],i);if(x)return{sql:this.mapInlineParam(p,i),params:[]};let N=["none"];return g&&(N=[g(u.encoder)]),{sql:m(b.value++,p),params:[p],typings:N}}return C(u,Ee)?{sql:m(b.value++,u),params:[u],typings:["none"]}:C(u,ne.Aliased)&&u.fieldAlias!==void 0?{sql:c(u.fieldAlias),params:[]}:C(u,ns)?u._.isWith?{sql:c(u._.alias),params:[]}:this.buildQueryFromSourceParams([new K("("),u._.sql,new K(") "),new Ue(u._.alias)],i):qc(u)?u.schema?{sql:c(u.schema)+"."+c(u.enumName),params:[]}:{sql:c(u.enumName),params:[]}:Bc(u)?(A=u.shouldOmitSQLParens)!=null&&A.call(u)?this.buildQueryFromSourceParams([u.getSQL()],i):this.buildQueryFromSourceParams([new K("("),u.getSQL(),new K(")")],i):x?{sql:this.mapInlineParam(u,i),params:[]}:{sql:m(b.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){const i=e.toString();return t(i==="[object Object]"?JSON.stringify(e):i)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new ne.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};a(ne,tt,"SQL");let S=ne;var rt;rt=o;class Ue{constructor(e){a(this,"brand");this.value=e}getSQL(){return new S([this])}}a(Ue,rt,"Name");const Un={mapFromDriverValue:r=>r},En={mapToDriverValue:r=>r};({...Un,...En});var it;it=o;class as{constructor(e,t=En){a(this,"brand");this.value=e,this.encoder=t}getSQL(){return new S([this])}}a(as,it,"Param");function Z(r,...e){const t=[];(e.length>0||r.length>0&&r[0]!=="")&&t.push(new K(r[0]));for(const[i,l]of e.entries())t.push(l,new K(r[i+1]));return new S(t)}(r=>{function e(){return new S([])}r.empty=e;function t(x){return new S(x)}r.fromList=t;function i(x){return new S([new K(x)])}r.raw=i;function l(x,b){const u=[];for(const[A,p]of x.entries())A>0&&b!==void 0&&u.push(b),u.push(p);return new S(u)}r.join=l;function c(x){return new Ue(x)}r.identifier=c;function m(x){return new Ee(x)}r.placeholder=m;function g(x,b){return new as(x,b)}r.param=g})(Z||(Z={}));(r=>{var t;t=o;const i=class i{constructor(c,m){a(this,"isSelectionField",!1);this.sql=c,this.fieldAlias=m}getSQL(){return this.sql}clone(){return new i(this.sql,this.fieldAlias)}};a(i,t,"SQL.Aliased");let e=i;r.Aliased=e})(S||(S={}));var nt;nt=o;class Ee{constructor(e){this.name=e}getSQL(){return new S([this])}}a(Ee,nt,"Placeholder");const Ln=Symbol.for("drizzle:IsDrizzleView");var at,lt,ot;ot=o,lt=ce,at=Ln;class qn{constructor({name:e,schema:t,selectedFields:i,query:l}){a(this,lt);a(this,at,!0);this[ce]={name:e,originalName:e,schema:t,selectedFields:i,query:l,isExisting:!l,isAlias:!1}}getSQL(){return new S([this])}}a(qn,ot,"View");function Qc(r){return typeof r=="object"&&r!==null&&Ln in r}de.prototype.getSQL=function(){return new S([this])};Q.prototype.getSQL=function(){return new S([this])};ns.prototype.getSQL=function(){return new S([this])};function Oc(r){return r[Q.Symbol.Columns]}function $c(r){return r[ce].selectedFields}function q(r,e){return{name:typeof r=="string"&&r.length>0?r:"",config:typeof r=="object"?r:e}}var ct,dt;class ye extends(dt=j,ct=o,dt){generatedAlwaysAsIdentity(e){if(e){const{name:t,...i}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:i}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:t,...i}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:i}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}a(ye,ct,"PgIntColumnBaseBuilder");var ut,mt;class zn extends(mt=ye,ut=o,mt){constructor(e){super(e,"number","PgBigInt53")}build(e){return new Bn(e,this.config)}}a(zn,ut,"PgBigInt53Builder");var ht,pt;class Bn extends(pt=h,ht=o,pt){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}a(Bn,ht,"PgBigInt53");var gt,xt;class Mn extends(xt=ye,gt=o,xt){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Qn(e,this.config)}}a(Mn,gt,"PgBigInt64Builder");var ft,yt;class Qn extends(yt=h,ft=o,yt){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}a(Qn,ft,"PgBigInt64");function Kc(r,e){const{name:t,config:i}=q(r,e);return i.mode==="number"?new zn(t):new Mn(t)}var jt,bt;class On extends(bt=j,jt=o,bt){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new $n(e,this.config)}}a(On,jt,"PgBigSerial53Builder");var Nt,vt;class $n extends(vt=h,Nt=o,vt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}a($n,Nt,"PgBigSerial53");var wt,St;class Kn extends(St=j,wt=o,St){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Zn(e,this.config)}}a(Kn,wt,"PgBigSerial64Builder");var Tt,It;class Zn extends(It=h,Tt=o,It){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}a(Zn,Tt,"PgBigSerial64");function Zc(r,e){const{name:t,config:i}=q(r,e);return i.mode==="number"?new On(t):new Kn(t)}var Pt,Ct;class Rn extends(Ct=j,Pt=o,Ct){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Xn(e,this.config)}}a(Rn,Pt,"PgBooleanBuilder");var At,_t;class Xn extends(_t=h,At=o,_t){getSQLType(){return"boolean"}}a(Xn,At,"PgBoolean");function ls(r){return new Rn(r??"")}var Dt,Ft;class Gn extends(Ft=j,Dt=o,Ft){constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new Jn(e,this.config)}}a(Gn,Dt,"PgCharBuilder");var Vt,Ut;class Jn extends(Ut=h,Vt=o,Ut){constructor(){super(...arguments);a(this,"length",this.config.length);a(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}a(Jn,Vt,"PgChar");function Rc(r,e={}){const{name:t,config:i}=q(r,e);return new Gn(t,i)}var Et,Lt;class Hn extends(Lt=j,Et=o,Lt){constructor(e){super(e,"string","PgCidr")}build(e){return new Yn(e,this.config)}}a(Hn,Et,"PgCidrBuilder");var qt,zt;class Yn extends(zt=h,qt=o,zt){getSQLType(){return"cidr"}}a(Yn,qt,"PgCidr");function Xc(r){return new Hn(r??"")}var Bt,Mt;class Wn extends(Mt=j,Bt=o,Mt){constructor(e,t,i){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=i}build(e){return new kn(e,this.config)}}a(Wn,Bt,"PgCustomColumnBuilder");var Qt,Ot;class kn extends(Ot=h,Qt=o,Ot){constructor(t,i){super(t,i);a(this,"sqlName");a(this,"mapTo");a(this,"mapFrom");this.sqlName=i.customTypeParams.dataType(i.fieldConfig),this.mapTo=i.customTypeParams.toDriver,this.mapFrom=i.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(t){return typeof this.mapFrom=="function"?this.mapFrom(t):t}mapToDriverValue(t){return typeof this.mapTo=="function"?this.mapTo(t):t}}a(kn,Qt,"PgCustomColumn");function Gc(r){return(e,t)=>{const{name:i,config:l}=q(e,t);return new Wn(i,l,r)}}var $t,Kt;class me extends(Kt=j,$t=o,Kt){defaultNow(){return this.default(Z`now()`)}}a(me,$t,"PgDateColumnBaseBuilder");var Zt,Rt;class ea extends(Rt=me,Zt=o,Rt){constructor(e){super(e,"date","PgDate")}build(e){return new sa(e,this.config)}}a(ea,Zt,"PgDateBuilder");var Xt,Gt;class sa extends(Gt=h,Xt=o,Gt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}a(sa,Xt,"PgDate");var Jt,Ht;class ta extends(Ht=me,Jt=o,Ht){constructor(e){super(e,"string","PgDateString")}build(e){return new ra(e,this.config)}}a(ta,Jt,"PgDateStringBuilder");var Yt,Wt;class ra extends(Wt=h,Yt=o,Wt){getSQLType(){return"date"}}a(ra,Yt,"PgDateString");function Jc(r,e){const{name:t,config:i}=q(r,e);return(i==null?void 0:i.mode)==="date"?new ea(t):new ta(t)}var kt,er;class ia extends(er=j,kt=o,er){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new na(e,this.config)}}a(ia,kt,"PgDoublePrecisionBuilder");var sr,tr;class na extends(tr=h,sr=o,tr){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}a(na,sr,"PgDoublePrecision");function Hc(r){return new ia(r??"")}var rr,ir;class aa extends(ir=j,rr=o,ir){constructor(e){super(e,"string","PgInet")}build(e){return new la(e,this.config)}}a(aa,rr,"PgInetBuilder");var nr,ar;class la extends(ar=h,nr=o,ar){getSQLType(){return"inet"}}a(la,nr,"PgInet");function Yc(r){return new aa(r??"")}var lr,or;class oa extends(or=ye,lr=o,or){constructor(e){super(e,"number","PgInteger")}build(e){return new ca(e,this.config)}}a(oa,lr,"PgIntegerBuilder");var cr,dr;class ca extends(dr=h,cr=o,dr){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}a(ca,cr,"PgInteger");function ue(r){return new oa(r??"")}var ur,mr;class da extends(mr=j,ur=o,mr){constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new ua(e,this.config)}}a(da,ur,"PgIntervalBuilder");var hr,pr;class ua extends(pr=h,hr=o,pr){constructor(){super(...arguments);a(this,"fields",this.config.intervalConfig.fields);a(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const t=this.fields?` ${this.fields}`:"",i=this.precision?`(${this.precision})`:"";return`interval${t}${i}`}}a(ua,hr,"PgInterval");function Wc(r,e={}){const{name:t,config:i}=q(r,e);return new da(t,i)}var gr,xr;class ma extends(xr=j,gr=o,xr){constructor(e){super(e,"json","PgJson")}build(e){return new ha(e,this.config)}}a(ma,gr,"PgJsonBuilder");var fr,yr;class ha extends(yr=h,fr=o,yr){constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}a(ha,fr,"PgJson");function kc(r){return new ma(r??"")}var jr,br;class pa extends(br=j,jr=o,br){constructor(e){super(e,"json","PgJsonb")}build(e){return new ga(e,this.config)}}a(pa,jr,"PgJsonbBuilder");var Nr,vr;class ga extends(vr=h,Nr=o,vr){constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}a(ga,Nr,"PgJsonb");function xa(r){return new pa(r??"")}var wr,Sr;class fa extends(Sr=j,wr=o,Sr){constructor(e){super(e,"array","PgLine")}build(e){return new ya(e,this.config)}}a(fa,wr,"PgLineBuilder");var Tr,Ir;class ya extends(Ir=h,Tr=o,Ir){getSQLType(){return"line"}mapFromDriverValue(e){const[t,i,l]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(i),Number.parseFloat(l)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}a(ya,Tr,"PgLine");var Pr,Cr;class ja extends(Cr=j,Pr=o,Cr){constructor(e){super(e,"json","PgLineABC")}build(e){return new ba(e,this.config)}}a(ja,Pr,"PgLineABCBuilder");var Ar,_r;class ba extends(_r=h,Ar=o,_r){getSQLType(){return"line"}mapFromDriverValue(e){const[t,i,l]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(i),c:Number.parseFloat(l)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}a(ba,Ar,"PgLineABC");function ed(r,e){const{name:t,config:i}=q(r,e);return!(i!=null&&i.mode)||i.mode==="tuple"?new fa(t):new ja(t)}var Dr,Fr;class Na extends(Fr=j,Dr=o,Fr){constructor(e){super(e,"string","PgMacaddr")}build(e){return new va(e,this.config)}}a(Na,Dr,"PgMacaddrBuilder");var Vr,Ur;class va extends(Ur=h,Vr=o,Ur){getSQLType(){return"macaddr"}}a(va,Vr,"PgMacaddr");function sd(r){return new Na(r??"")}var Er,Lr;class wa extends(Lr=j,Er=o,Lr){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Sa(e,this.config)}}a(wa,Er,"PgMacaddr8Builder");var qr,zr;class Sa extends(zr=h,qr=o,zr){getSQLType(){return"macaddr8"}}a(Sa,qr,"PgMacaddr8");function td(r){return new wa(r??"")}var Br,Mr;class Ta extends(Mr=j,Br=o,Mr){constructor(e,t,i){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=i}build(e){return new Ia(e,this.config)}}a(Ta,Br,"PgNumericBuilder");var Qr,Or;class Ia extends(Or=h,Qr=o,Or){constructor(t,i){super(t,i);a(this,"precision");a(this,"scale");this.precision=i.precision,this.scale=i.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}a(Ia,Qr,"PgNumeric");function rd(r,e){const{name:t,config:i}=q(r,e);return new Ta(t,i==null?void 0:i.precision,i==null?void 0:i.scale)}var $r,Kr;class Pa extends(Kr=j,$r=o,Kr){constructor(e){super(e,"array","PgPointTuple")}build(e){return new Ca(e,this.config)}}a(Pa,$r,"PgPointTupleBuilder");var Zr,Rr;class Ca extends(Rr=h,Zr=o,Rr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,i]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(i)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}a(Ca,Zr,"PgPointTuple");var Xr,Gr;class Aa extends(Gr=j,Xr=o,Gr){constructor(e){super(e,"json","PgPointObject")}build(e){return new _a(e,this.config)}}a(Aa,Xr,"PgPointObjectBuilder");var Jr,Hr;class _a extends(Hr=h,Jr=o,Hr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,i]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(i)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}a(_a,Jr,"PgPointObject");function id(r,e){const{name:t,config:i}=q(r,e);return!(i!=null&&i.mode)||i.mode==="tuple"?new Pa(t):new Aa(t)}function nd(r){const e=[];for(let t=0;t<r.length;t+=2)e.push(Number.parseInt(r.slice(t,t+2),16));return new Uint8Array(e)}function Ps(r,e){const t=new ArrayBuffer(8),i=new DataView(t);for(let l=0;l<8;l++)i.setUint8(l,r[e+l]);return i.getFloat64(0,!0)}function Da(r){const e=nd(r);let t=0;const i=e[t];t+=1;const l=new DataView(e.buffer),c=l.getUint32(t,i===1);if(t+=4,c&536870912&&(l.getUint32(t,i===1),t+=4),(c&65535)===1){const m=Ps(e,t);t+=8;const g=Ps(e,t);return t+=8,[m,g]}throw new Error("Unsupported geometry type")}var Yr,Wr;class Fa extends(Wr=j,Yr=o,Wr){constructor(e){super(e,"array","PgGeometry")}build(e){return new Va(e,this.config)}}a(Fa,Yr,"PgGeometryBuilder");var kr,ei;class Va extends(ei=h,kr=o,ei){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return Da(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}a(Va,kr,"PgGeometry");var si,ti;class Ua extends(ti=j,si=o,ti){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Ea(e,this.config)}}a(Ua,si,"PgGeometryObjectBuilder");var ri,ii;class Ea extends(ii=h,ri=o,ii){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const t=Da(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}a(Ea,ri,"PgGeometryObject");function ad(r,e){const{name:t,config:i}=q(r,e);return!(i!=null&&i.mode)||i.mode==="tuple"?new Fa(t):new Ua(t)}var ni,ai;class La extends(ai=j,ni=o,ai){constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new qa(e,this.config)}}a(La,ni,"PgRealBuilder");var li,oi;class qa extends(oi=h,li=o,oi){constructor(t,i){super(t,i);a(this,"mapFromDriverValue",t=>typeof t=="string"?Number.parseFloat(t):t)}getSQLType(){return"real"}}a(qa,li,"PgReal");function ld(r){return new La(r??"")}var ci,di;class za extends(di=j,ci=o,di){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ba(e,this.config)}}a(za,ci,"PgSerialBuilder");var ui,mi;class Ba extends(mi=h,ui=o,mi){getSQLType(){return"serial"}}a(Ba,ui,"PgSerial");function od(r){return new za(r??"")}var hi,pi;class Ma extends(pi=ye,hi=o,pi){constructor(e){super(e,"number","PgSmallInt")}build(e){return new Qa(e,this.config)}}a(Ma,hi,"PgSmallIntBuilder");var gi,xi;class Qa extends(xi=h,gi=o,xi){constructor(){super(...arguments);a(this,"mapFromDriverValue",t=>typeof t=="string"?Number(t):t)}getSQLType(){return"smallint"}}a(Qa,gi,"PgSmallInt");function cd(r){return new Ma(r??"")}var fi,yi;class Oa extends(yi=j,fi=o,yi){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new $a(e,this.config)}}a(Oa,fi,"PgSmallSerialBuilder");var ji,bi;class $a extends(bi=h,ji=o,bi){getSQLType(){return"smallserial"}}a($a,ji,"PgSmallSerial");function dd(r){return new Oa(r??"")}var Ni,vi;class Ka extends(vi=j,Ni=o,vi){constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new Za(e,this.config)}}a(Ka,Ni,"PgTextBuilder");var wi,Si;class Za extends(Si=h,wi=o,Si){constructor(){super(...arguments);a(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}a(Za,wi,"PgText");function Be(r,e={}){const{name:t,config:i}=q(r,e);return new Ka(t,i)}var Ti,Ii;class Ra extends(Ii=me,Ti=o,Ii){constructor(e,t,i){super(e,"string","PgTime"),this.withTimezone=t,this.precision=i,this.config.withTimezone=t,this.config.precision=i}build(e){return new Xa(e,this.config)}}a(Ra,Ti,"PgTimeBuilder");var Pi,Ci;class Xa extends(Ci=h,Pi=o,Ci){constructor(t,i){super(t,i);a(this,"withTimezone");a(this,"precision");this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}a(Xa,Pi,"PgTime");function ud(r,e={}){const{name:t,config:i}=q(r,e);return new Ra(t,i.withTimezone??!1,i.precision)}var Ai,_i;class Ga extends(_i=me,Ai=o,_i){constructor(e,t,i){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=i}build(e){return new Ja(e,this.config)}}a(Ga,Ai,"PgTimestampBuilder");var Di,Fi;class Ja extends(Fi=h,Di=o,Fi){constructor(t,i){super(t,i);a(this,"withTimezone");a(this,"precision");a(this,"mapFromDriverValue",t=>new Date(this.withTimezone?t:t+"+0000"));a(this,"mapToDriverValue",t=>t.toISOString());this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}a(Ja,Di,"PgTimestamp");var Vi,Ui;class Ha extends(Ui=me,Vi=o,Ui){constructor(e,t,i){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=i}build(e){return new Ya(e,this.config)}}a(Ha,Vi,"PgTimestampStringBuilder");var Ei,Li;class Ya extends(Li=h,Ei=o,Li){constructor(t,i){super(t,i);a(this,"withTimezone");a(this,"precision");this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}a(Ya,Ei,"PgTimestampString");function R(r,e={}){const{name:t,config:i}=q(r,e);return(i==null?void 0:i.mode)==="string"?new Ha(t,i.withTimezone??!1,i.precision):new Ga(t,(i==null?void 0:i.withTimezone)??!1,i==null?void 0:i.precision)}var qi,zi;class Wa extends(zi=j,qi=o,zi){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(Z`gen_random_uuid()`)}build(e){return new ka(e,this.config)}}a(Wa,qi,"PgUUIDBuilder");var Bi,Mi;class ka extends(Mi=h,Bi=o,Mi){getSQLType(){return"uuid"}}a(ka,Bi,"PgUUID");function md(r){return new Wa(r??"")}var Qi,Oi;class el extends(Oi=j,Qi=o,Oi){constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new sl(e,this.config)}}a(el,Qi,"PgVarcharBuilder");var $i,Ki;class sl extends(Ki=h,$i=o,Ki){constructor(){super(...arguments);a(this,"length",this.config.length);a(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}a(sl,$i,"PgVarchar");function f(r,e={}){const{name:t,config:i}=q(r,e);return new el(t,i)}var Zi,Ri;class tl extends(Ri=j,Zi=o,Ri){constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new rl(e,this.config)}}a(tl,Zi,"PgBinaryVectorBuilder");var Xi,Gi;class rl extends(Gi=h,Xi=o,Gi){constructor(){super(...arguments);a(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}a(rl,Xi,"PgBinaryVector");function hd(r,e){const{name:t,config:i}=q(r,e);return new tl(t,i)}var Ji,Hi;class il extends(Hi=j,Ji=o,Hi){constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new nl(e,this.config)}}a(il,Ji,"PgHalfVectorBuilder");var Yi,Wi;class nl extends(Wi=h,Yi=o,Wi){constructor(){super(...arguments);a(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(i=>Number.parseFloat(i))}}a(nl,Yi,"PgHalfVector");function pd(r,e){const{name:t,config:i}=q(r,e);return new il(t,i)}var ki,en;class al extends(en=j,ki=o,en){constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new ll(e,this.config)}}a(al,ki,"PgSparseVectorBuilder");var sn,tn;class ll extends(tn=h,sn=o,tn){constructor(){super(...arguments);a(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}a(ll,sn,"PgSparseVector");function gd(r,e){const{name:t,config:i}=q(r,e);return new al(t,i)}var rn,nn;class ol extends(nn=j,rn=o,nn){constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new cl(e,this.config)}}a(ol,rn,"PgVectorBuilder");var an,ln;class cl extends(ln=h,an=o,ln){constructor(){super(...arguments);a(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(i=>Number.parseFloat(i))}}a(cl,an,"PgVector");function xd(r,e){const{name:t,config:i}=q(r,e);return new ol(t,i)}function fd(){return{bigint:Kc,bigserial:Zc,boolean:ls,char:Rc,cidr:Xc,customType:Gc,date:Jc,doublePrecision:Hc,inet:Yc,integer:ue,interval:Wc,json:kc,jsonb:xa,line:ed,macaddr:sd,macaddr8:td,numeric:rd,point:id,geometry:ad,real:ld,serial:od,smallint:cd,smallserial:dd,text:Be,time:ud,timestamp:R,uuid:md,varchar:f,bit:hd,halfvec:pd,sparsevec:gd,vector:xd}}const ts=Symbol.for("drizzle:PgInlineForeignKeys"),Cs=Symbol.for("drizzle:EnableRLS");var on,cn,dn,un,mn;class fe extends(mn=Q,un=o,dn=ts,cn=Cs,on=Q.Symbol.ExtraConfigBuilder,mn){constructor(){super(...arguments);a(this,dn,[]);a(this,cn,!1);a(this,on)}}a(fe,un,"PgTable"),a(fe,"Symbol",Object.assign({},Q.Symbol,{InlineForeignKeys:ts,EnableRLS:Cs}));function yd(r,e,t,i,l=r){const c=new fe(r,i,l),m=typeof e=="function"?e(fd()):e,g=Object.fromEntries(Object.entries(m).map(([u,A])=>{const p=A;p.setName(u);const N=p.build(c);return c[ts].push(...p.buildForeignKeys(N,c)),[u,N]})),x=Object.fromEntries(Object.entries(m).map(([u,A])=>{const p=A;p.setName(u);const N=p.buildExtraConfigColumn(c);return[u,N]})),b=Object.assign(c,g);return b[Q.Symbol.Columns]=g,b[Q.Symbol.ExtraConfigColumns]=x,t&&(b[fe.Symbol.ExtraConfigBuilder]=t),Object.assign(b,{enableRLS:()=>(b[fe.Symbol.EnableRLS]=!0,b)})}const ee=(r,e,t)=>yd(r,e,t,void 0);var hn;hn=o;class dl{constructor(e,t){this.unique=e,this.name=t}on(...e){return new De(e.map(t=>{if(C(t,S))return t;t=t;const i=new _e(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=JSON.parse(JSON.stringify(t.defaultConfig)),i}),this.unique,!1,this.name)}onOnly(...e){return new De(e.map(t=>{if(C(t,S))return t;t=t;const i=new _e(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=t.defaultConfig,i}),this.unique,!0,this.name)}using(e,...t){return new De(t.map(i=>{if(C(i,S))return i;i=i;const l=new _e(i.name,!!i.keyAsName,i.columnType,i.indexConfig);return i.indexConfig=JSON.parse(JSON.stringify(i.defaultConfig)),l}),this.unique,!0,this.name,e)}}a(dl,hn,"PgIndexBuilderOn");var pn;pn=o;class De{constructor(e,t,i,l,c="btree"){a(this,"config");this.config={name:l,columns:e,unique:t,only:i,method:c}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new ul(this.config,e)}}a(De,pn,"PgIndexBuilder");var gn;gn=o;class ul{constructor(e,t){a(this,"config");this.config={...e,table:t}}}a(ul,gn,"PgIndex");function jd(r){return new dl(!1,r)}const w={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function I(r,e){return e.includes(r.columnType)}function bd(r){return"enumValues"in r&&Array.isArray(r.enumValues)&&r.enumValues.length>0}const Nd=is([_(),wn(),bn(),vn()]),vd=is([Nd,Sn(Fe()),jn(Fe())]),wd=Nn(r=>r instanceof Buffer);function ml(r,e){const t=(e==null?void 0:e.zodInstance)??Vc,i=(e==null?void 0:e.coerce)??{};let l;return bd(r)&&(l=r.enumValues.length?t.enum(r.enumValues):t.string()),l||(I(r,["PgGeometry","PgPointTuple"])?l=t.tuple([t.number(),t.number()]):I(r,["PgGeometryObject","PgPointObject"])?l=t.object({x:t.number(),y:t.number()}):I(r,["PgHalfVector","PgVector"])?(l=t.array(t.number()),l=r.dimensions?l.length(r.dimensions):l):I(r,["PgLine"])?l=t.tuple([t.number(),t.number(),t.number()]):I(r,["PgLineABC"])?l=t.object({a:t.number(),b:t.number(),c:t.number()}):I(r,["PgArray"])?(l=t.array(ml(r.baseColumn,t)),l=r.size?l.length(r.size):l):r.dataType==="array"?l=t.array(t.any()):r.dataType==="number"?l=Sd(r,t,i):r.dataType==="bigint"?l=Td(r,t,i):r.dataType==="boolean"?l=i===!0||i.boolean?t.coerce.boolean():t.boolean():r.dataType==="date"?l=i===!0||i.date?t.coerce.date():t.date():r.dataType==="string"?l=Id(r,t,i):r.dataType==="json"?l=vd:r.dataType==="custom"?l=t.any():r.dataType==="buffer"&&(l=wd)),l||(l=t.any()),l}function Sd(r,e,t){let i=r.getSQLType().includes("unsigned"),l,c,m=!1;I(r,["MySqlTinyInt","SingleStoreTinyInt"])?(l=i?0:w.INT8_MIN,c=i?w.INT8_UNSIGNED_MAX:w.INT8_MAX,m=!0):I(r,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(l=i?0:w.INT16_MIN,c=i?w.INT16_UNSIGNED_MAX:w.INT16_MAX,m=!0):I(r,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(l=i?0:w.INT24_MIN,c=i?w.INT24_UNSIGNED_MAX:w.INT24_MAX,m=I(r,["MySqlMediumInt","SingleStoreMediumInt"])):I(r,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(l=i?0:w.INT32_MIN,c=i?w.INT32_UNSIGNED_MAX:w.INT32_MAX,m=!0):I(r,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(l=i?0:w.INT48_MIN,c=i?w.INT48_UNSIGNED_MAX:w.INT48_MAX):I(r,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(i=i||I(r,["MySqlSerial","SingleStoreSerial"]),l=i?0:Number.MIN_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,m=!0):I(r,["MySqlYear","SingleStoreYear"])?(l=1901,c=2155,m=!0):(l=Number.MIN_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER);let g=t===!0||t!=null&&t.number?e.coerce.number():e.number();return g=g.min(l).max(c),m?g.int():g}function Td(r,e,t){const i=r.getSQLType().includes("unsigned"),l=i?0n:w.INT64_MIN,c=i?w.INT64_UNSIGNED_MAX:w.INT64_MAX;return(t===!0||t!=null&&t.bigint?e.coerce.bigint():e.bigint()).min(l).max(c)}function Id(r,e,t){if(I(r,["PgUUID"]))return e.string().uuid();let i,l,c=!1;I(r,["PgVarchar","SQLiteText"])?i=r.length:I(r,["MySqlVarChar","SingleStoreVarChar"])?i=r.length??w.INT16_UNSIGNED_MAX:I(r,["MySqlText","SingleStoreText"])&&(r.textType==="longtext"?i=w.INT32_UNSIGNED_MAX:r.textType==="mediumtext"?i=w.INT24_UNSIGNED_MAX:r.textType==="text"?i=w.INT16_UNSIGNED_MAX:i=w.INT8_UNSIGNED_MAX),I(r,["PgChar","MySqlChar","SingleStoreChar"])&&(i=r.length,c=!0),I(r,["PgBinaryVector"])&&(l=/^[01]+$/,i=r.dimensions);let m=t===!0||t!=null&&t.string?e.coerce.string():e.string();return m=l?m.regex(l):m,i&&c?m.length(i):i?m.max(i):m}function hl(r){return Vn(r)?Oc(r):$c(r)}function pl(r,e,t,i){const l={};for(const[c,m]of Object.entries(r)){if(!C(m,de)&&!C(m,S)&&!C(m,S.Aliased)&&typeof m=="object"){const A=Vn(m)||Qc(m)?hl(m):m;l[c]=pl(A,e[c]??{},t,i);continue}const g=e[c];if(g!==void 0&&typeof g!="function"){l[c]=g;continue}const x=C(m,de)?m:void 0,b=x?ml(x,i):Fe(),u=typeof g=="function"?g(b):b;t.never(x)||(l[c]=u,x&&(t.nullable(x)&&(l[c]=l[c].nullable()),t.optional(x)&&(l[c]=l[c].optional())))}return ze(l)}const Pd={never:r=>{var e,t;return((e=r==null?void 0:r.generated)==null?void 0:e.type)==="always"||((t=r==null?void 0:r.generatedIdentity)==null?void 0:t.type)==="always"},optional:r=>!r.notNull||r.notNull&&r.hasDefault,nullable:r=>!r.notNull},he=(r,e)=>{const t=hl(r);return pl(t,{},Pd)};ee("sessions",{sid:f("sid").primaryKey(),sess:xa("sess").notNull(),expire:R("expire").notNull()},r=>[jd("IDX_session_expire").on(r.expire)]);const gl=ee("users",{id:f("id").primaryKey().default(Z`gen_random_uuid()`),username:f("username").unique().notNull(),email:f("email").unique(),password:f("password").notNull(),firstName:f("first_name"),lastName:f("last_name"),profileImageUrl:f("profile_image_url"),isAdmin:ls("is_admin").default(!1),createdAt:R("created_at").defaultNow(),updatedAt:R("updated_at").defaultNow()}),Me=ee("artists",{id:f("id").primaryKey().default(Z`gen_random_uuid()`),name:f("name").notNull(),bio:Be("bio"),profileImageUrl:f("profile_image_url"),coverImageUrl:f("cover_image_url"),createdAt:R("created_at").defaultNow()}),xl=ee("albums",{id:f("id").primaryKey().default(Z`gen_random_uuid()`),title:f("title").notNull(),artistId:f("artist_id").references(()=>Me.id),coverImageUrl:f("cover_image_url"),releaseDate:R("release_date"),createdAt:R("created_at").defaultNow()}),os=ee("songs",{id:f("id").primaryKey().default(Z`gen_random_uuid()`),title:f("title").notNull(),artistId:f("artist_id").references(()=>Me.id),albumId:f("album_id").references(()=>xl.id),audioUrl:f("audio_url").notNull(),lyrics:Be("lyrics"),duration:ue("duration"),playCount:ue("play_count").default(0),createdAt:R("created_at").defaultNow()}),Cd=ee("videos",{id:f("id").primaryKey().default(Z`gen_random_uuid()`),title:f("title").notNull(),artistId:f("artist_id").references(()=>Me.id),videoUrl:f("video_url").notNull(),thumbnailUrl:f("thumbnail_url"),duration:ue("duration"),viewCount:ue("view_count").default(0),createdAt:R("created_at").defaultNow()}),fl=ee("playlists",{id:f("id").primaryKey().default(Z`gen_random_uuid()`),name:f("name").notNull(),description:Be("description"),userId:f("user_id").references(()=>gl.id),isPublic:ls("is_public").default(!0),coverImageUrl:f("cover_image_url"),createdAt:R("created_at").defaultNow()}),Ad=ee("playlist_songs",{id:f("id").primaryKey().default(Z`gen_random_uuid()`),playlistId:f("playlist_id").references(()=>fl.id),songId:f("song_id").references(()=>os.id),position:ue("position"),addedAt:R("added_at").defaultNow()});ee("user_favorites",{id:f("id").primaryKey().default(Z`gen_random_uuid()`),userId:f("user_id").references(()=>gl.id),songId:f("song_id").references(()=>os.id),createdAt:R("created_at").defaultNow()});const _d=he(Me).omit({id:!0,createdAt:!0}),Dd=he(xl).omit({id:!0,createdAt:!0}),Fd=he(os).omit({id:!0,createdAt:!0,playCount:!0}),Vd=he(Cd).omit({id:!0,createdAt:!0,viewCount:!0});he(fl).omit({id:!0,createdAt:!0});he(Ad).omit({id:!0,addedAt:!0});ze({username:_().min(1,"اسم المستخدم مطلوب"),password:_().min(6,"كلمة المرور يجب أن تحتوي على 6 أحرف على الأقل")});ze({username:_().min(3,"اسم المستخدم يجب أن يحتوي على 3 أحرف على الأقل"),email:_().email("البريد الإلكتروني غير صالح").optional(),password:_().min(6,"كلمة المرور يجب أن تحتوي على 6 أحرف على الأقل"),firstName:_().optional(),lastName:_().optional()});const Ud=_d.extend({name:_().min(1,"اسم الفنان مطلوب")}),Ed=Dd.extend({title:_().min(1,"عنوان الألبوم مطلوب"),artistId:_().min(1,"يجب اختيار فنان")}),Ld=Fd.extend({title:_().min(1,"عنوان الأغنية مطلوب"),artistId:_().min(1,"يجب اختيار فنان"),audioUrl:_().min(1,"رابط الصوت مطلوب"),albumId:_().optional()}),qd=Vd.extend({title:_().min(1,"عنوان الفيديو مطلوب"),artistId:_().min(1,"يجب اختيار فنان"),videoUrl:_().min(1,"رابط الفيديو مطلوب")});function zd(){const{user:r}=xn(),{toast:e}=fn(),[t,i]=M.useState(!1),[l,c]=M.useState("upload"),[m,g]=M.useState({image:!1,audio:!1,video:!1}),[x,b]=M.useState({image:null,audio:null,video:null}),u=ve({resolver:Se(Ud),defaultValues:{name:"",bio:"",profileImageUrl:"",coverImageUrl:""}}),A=ve({resolver:Se(Ed),defaultValues:{title:"",artistId:"",coverImageUrl:""}}),p=ve({resolver:Se(Ld),defaultValues:{title:"",artistId:"",albumId:"none",audioUrl:"",lyrics:"",duration:0}}),N=ve({resolver:Se(qd),defaultValues:{title:"",artistId:"",videoUrl:"",thumbnailUrl:"",duration:0}}),{data:T,isLoading:je}=Ne({queryKey:["/api/artists"],enabled:t&&l==="manage",staleTime:10*60*1e3,gcTime:15*60*1e3}),{data:$,isLoading:cs}=Ne({queryKey:["/api/albums"],enabled:t&&(l==="manage"||l==="upload"),staleTime:10*60*1e3,gcTime:15*60*1e3}),{data:J,isLoading:yl}=Ne({queryKey:["/api/songs"],enabled:t&&l==="manage",staleTime:10*60*1e3,gcTime:15*60*1e3}),{data:ie,isLoading:jl}=Ne({queryKey:["/api/videos"],enabled:t&&l==="manage",staleTime:10*60*1e3,gcTime:15*60*1e3}),ds=J&&Array.isArray(J)?J.length:0,us=T&&Array.isArray(T)?T.length:0,bl=$&&Array.isArray($)?$.length:0,ms=ie&&Array.isArray(ie)?ie.length:0,Nl=J&&Array.isArray(J)?J.reduce((n,d)=>n+(d.playCount||0),0):0,vl=X({mutationFn:async({file:n,fieldName:d})=>{const y=new FormData;y.append("image",n);const v=await fetch("/api/upload/image",{method:"POST",body:y,credentials:"include"});if(!v.ok){const ae=await v.json();throw new Error(ae.message||"فشل في رفع الصورة")}return{...await v.json(),fieldName:d}},onMutate:()=>{g(n=>({...n,image:!0}))},onSuccess:n=>{b(d=>({...d,image:n.url})),n.fieldName==="profileImageUrl"?u.setValue("profileImageUrl",n.url):n.fieldName==="coverImageUrl"?u.setValue("coverImageUrl",n.url):n.fieldName==="albumCoverImageUrl"&&A.setValue("coverImageUrl",n.url),e({title:"تم رفع الصورة",description:"تم رفع الصورة بنجاح"})},onError:n=>{e({title:"خطأ",description:n.message,variant:"destructive"})},onSettled:()=>{g(n=>({...n,image:!1}))}}),wl=X({mutationFn:async n=>{const d=new FormData;d.append("audio",n);const y=await fetch("/api/upload/audio",{method:"POST",body:d,credentials:"include"});if(!y.ok){const v=await y.json();throw new Error(v.message||"فشل في رفع الملف الصوتي")}return y.json()},onMutate:()=>{g(n=>({...n,audio:!0}))},onSuccess:n=>{b(d=>({...d,audio:n.url})),p.setValue("audioUrl",n.url),e({title:"تم رفع الملف الصوتي",description:"تم رفع الملف الصوتي بنجاح"})},onError:n=>{e({title:"خطأ",description:n.message,variant:"destructive"})},onSettled:()=>{g(n=>({...n,audio:!1}))}}),Sl=X({mutationFn:async n=>{const d=new FormData;d.append("video",n);const y=await fetch("/api/upload/video",{method:"POST",body:d,credentials:"include"});if(!y.ok){const v=await y.json();throw new Error(v.message||"فشل في رفع الفيديو")}return y.json()},onMutate:()=>{g(n=>({...n,video:!0}))},onSuccess:n=>{b(d=>({...d,video:n.url})),N.setValue("videoUrl",n.url),e({title:"تم رفع الفيديو",description:"تم رفع الفيديو بنجاح"})},onError:n=>{e({title:"خطأ",description:n.message,variant:"destructive"})},onSettled:()=>{g(n=>({...n,video:!1}))}}),pe=(n,d,y)=>{d==="image"?vl.mutate({file:n,fieldName:y}):d==="audio"?wl.mutate(n):d==="video"&&Sl.mutate(n)},Qe=X({mutationFn:async n=>{await W("POST","/api/artists",n)},onSuccess:()=>{G.invalidateQueries({queryKey:["/api/artists"]}),u.reset(),b(n=>({...n,image:null})),e({title:"تم إنشاء الفنان",description:"تم إنشاء الفنان بنجاح"}),setTimeout(()=>{c("upload")},1500)},onError:n=>{if(se(n)){e({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}e({title:"خطأ",description:"فشل في إنشاء الفنان",variant:"destructive"})}}),Oe=X({mutationFn:async n=>{await W("POST","/api/albums",n)},onSuccess:()=>{G.invalidateQueries({queryKey:["/api/albums"]}),A.reset(),b(n=>({...n,image:null})),e({title:"تم إنشاء الألبوم",description:"تم إنشاء الألبوم بنجاح"}),setTimeout(()=>{c("upload")},1500)},onError:n=>{if(se(n)){e({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}e({title:"خطأ",description:"فشل في إنشاء الألبوم",variant:"destructive"})}}),$e=X({mutationFn:async n=>{let d=n.albumId;if(d==="default"){const v="الأغاني المنفردة",Re=$&&Array.isArray($)?$.find(ae=>ae.title===v&&ae.artistId===n.artistId):null;if(Re)d=Re.id;else{const ae={title:v,artistId:n.artistId,coverImageUrl:""};d=(await W("POST","/api/albums",ae)).id||"",G.invalidateQueries({queryKey:["/api/albums"]})}}else d==="none"&&(d=void 0);const y={...n,albumId:d||null,duration:n.duration||null,lyrics:n.lyrics||null};await W("POST","/api/songs",y)},onSuccess:()=>{G.invalidateQueries({queryKey:["/api/songs"]}),G.invalidateQueries({queryKey:["/api/songs/trending"]}),p.reset(),b(n=>({...n,audio:null})),e({title:"تم رفع الأغنية",description:"تم رفع الأغنية بنجاح"}),setTimeout(()=>{c("upload")},1500)},onError:n=>{if(se(n)){e({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}e({title:"خطأ",description:"فشل في رفع الأغنية",variant:"destructive"})}}),Ke=X({mutationFn:async n=>{await W("POST","/api/videos",n)},onSuccess:()=>{G.invalidateQueries({queryKey:["/api/videos"]}),N.reset(),b(n=>({...n,video:null})),e({title:"تم رفع الفيديو",description:"تم رفع الفيديو بنجاح"}),setTimeout(()=>{c("upload")},1500)},onError:n=>{if(se(n)){e({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}e({title:"خطأ",description:"فشل في رفع الفيديو",variant:"destructive"})}}),hs=X({mutationFn:async n=>{await W("DELETE",`/api/artists/${n}`)},onSuccess:()=>{G.invalidateQueries({queryKey:["/api/artists"]}),e({title:"تم حذف الفنان",description:"تم حذف الفنان بنجاح"})},onError:n=>{if(se(n)){e({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}e({title:"خطأ",description:"فشل في حذف الفنان",variant:"destructive"})}}),ps=X({mutationFn:async n=>{await W("DELETE",`/api/albums/${n}`)},onSuccess:()=>{G.invalidateQueries({queryKey:["/api/albums"]}),e({title:"تم حذف الألبوم",description:"تم حذف الألبوم بنجاح"})},onError:n=>{if(se(n)){e({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}e({title:"خطأ",description:"فشل في حذف الألبوم",variant:"destructive"})}}),gs=X({mutationFn:async n=>{await W("DELETE",`/api/songs/${n}`)},onSuccess:()=>{G.invalidateQueries({queryKey:["/api/songs"]}),G.invalidateQueries({queryKey:["/api/songs/trending"]}),e({title:"تم حذف الأغنية",description:"تم حذف الأغنية بنجاح"})},onError:n=>{if(se(n)){e({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}e({title:"خطأ",description:"فشل في حذف الأغنية",variant:"destructive"})}}),xs=X({mutationFn:async n=>{await W("DELETE",`/api/videos/${n}`)},onSuccess:()=>{G.invalidateQueries({queryKey:["/api/videos"]}),e({title:"تم حذف الفيديو",description:"تم حذف الفيديو بنجاح"})},onError:n=>{if(se(n)){e({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}e({title:"خطأ",description:"فشل في حذف الفيديو",variant:"destructive"})}});if(M.useEffect(()=>{const n=()=>{i(!0)},d=document.querySelectorAll('[data-testid="nav-upload"]');return d.forEach(y=>{y.addEventListener("click",n)}),()=>{d.forEach(y=>{y.removeEventListener("click",n)})}},[]),!(r!=null&&r.isAdmin))return null;const Ze=n=>{if(!T||!Array.isArray(T))return"فنان غير معروف";const d=T.find(y=>y.id===n);return(d==null?void 0:d.name)||"فنان غير معروف"},be=n=>n>=1e6?`${(n/1e6).toFixed(1)}M`:n>=1e3?`${(n/1e3).toFixed(1)}K`:n.toString(),Tl=n=>{u.reset({name:n.name||"",bio:n.bio||"",profileImageUrl:n.profileImageUrl||"",coverImageUrl:n.coverImageUrl||""}),c("upload"),setTimeout(()=>{const d=document.querySelector('[data-testid="tab-upload-artist"]');d&&d.click()},100)},Il=n=>{A.reset({title:n.title||"",artistId:n.artistId||"",coverImageUrl:n.coverImageUrl||""}),c("upload"),setTimeout(()=>{const d=document.querySelector('[data-testid="tab-upload-album"]');d&&d.click()},100)},Pl=n=>{p.reset({title:n.title||"",artistId:n.artistId||"",albumId:n.albumId||"none",audioUrl:n.audioUrl||"",lyrics:n.lyrics||"",duration:n.duration||0}),c("upload"),setTimeout(()=>{const d=document.querySelector('[data-testid="tab-upload-song"]');d&&d.click()},100)},Cl=n=>{N.reset({title:n.title||"",artistId:n.artistId||"",videoUrl:n.videoUrl||"",thumbnailUrl:n.thumbnailUrl||"",duration:n.duration||0}),c("upload"),setTimeout(()=>{const d=document.querySelector('[data-testid="tab-upload-video"]');d&&d.click()},100)};return s.jsx(Sc,{open:t,onOpenChange:i,children:s.jsxs(Tc,{className:"max-w-6xl max-h-[90vh] overflow-y-auto bg-card border-border",children:[s.jsx(Ic,{children:s.jsxs(Pc,{className:"text-2xl font-bold flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:s.jsx(Ge,{className:"w-5 h-5 text-primary-foreground"})}),"لوحة الإدارة"]})}),s.jsxs(bs,{value:l,onValueChange:c,className:"w-full",children:[s.jsxs(Ns,{className:"grid w-full grid-cols-4 bg-muted",children:[s.jsx(te,{value:"upload","data-testid":"tab-upload",children:"رفع المحتوى"}),s.jsx(te,{value:"manage","data-testid":"tab-manage",children:"إدارة المحتوى"}),s.jsx(te,{value:"stats","data-testid":"tab-stats",children:"الإحصائيات"}),s.jsx(te,{value:"users","data-testid":"tab-users",children:"المستخدمين"})]}),s.jsx(re,{value:"upload",className:"space-y-6",children:s.jsxs(bs,{defaultValue:"song",className:"w-full",children:[s.jsxs(Ns,{className:"grid w-full grid-cols-4",children:[s.jsx(te,{value:"song","data-testid":"tab-upload-song",children:"أغنية"}),s.jsx(te,{value:"video","data-testid":"tab-upload-video",children:"فيديو"}),s.jsx(te,{value:"artist","data-testid":"tab-upload-artist",children:"فنان"}),s.jsx(te,{value:"album","data-testid":"tab-upload-album",children:"ألبوم"})]}),s.jsx(re,{value:"song",children:s.jsxs(z,{children:[s.jsx(H,{children:s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(Xe,{className:"w-5 h-5"}),"رفع أغنية جديدة"]})}),s.jsx(B,{children:s.jsx(we,{...p,children:s.jsxs("form",{onSubmit:p.handleSubmit(n=>$e.mutate(n)),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(D,{control:p.control,name:"title",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"عنوان الأغنية"}),s.jsx(U,{children:s.jsx(L,{placeholder:"أدخل عنوان الأغنية",...n,"data-testid":"input-song-title"})}),s.jsx(E,{})]})}),s.jsx(D,{control:p.control,name:"artistId",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"الفنان"}),s.jsxs(Te,{onValueChange:n.onChange,defaultValue:n.value,children:[s.jsx(U,{children:s.jsx(Ie,{"data-testid":"select-song-artist",children:s.jsx(Pe,{placeholder:"اختر الفنان"})})}),s.jsx(Ce,{children:je?s.jsx("div",{className:"p-2",children:"جاري التحميل..."}):T&&Array.isArray(T)?T.map(d=>s.jsx(le,{value:d.id,children:d.name},d.id)):null})]}),s.jsx(E,{})]})}),s.jsx(D,{control:p.control,name:"albumId",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"الألبوم (اختياري)"}),s.jsxs(Te,{onValueChange:n.onChange,defaultValue:n.value||"none",children:[s.jsx(U,{children:s.jsx(Ie,{"data-testid":"select-song-album",children:s.jsx(Pe,{placeholder:"اختر الألبوم"})})}),s.jsxs(Ce,{children:[s.jsx(le,{value:"none",children:"بدون ألبوم"}),s.jsx(le,{value:"default",children:"ألبوم افتراضي"}),cs?s.jsx("div",{className:"p-2",children:"جاري التحميل..."}):$&&Array.isArray($)?$.map(d=>s.jsx(le,{value:d.id||"",children:d.title},d.id)):null]})]}),s.jsx(E,{})]})}),s.jsx(D,{control:p.control,name:"duration",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"المدة (بالثواني)"}),s.jsx(U,{children:s.jsx(L,{type:"number",placeholder:"272",...n,value:n.value||"",onChange:d=>n.onChange(parseInt(d.target.value)||0),"data-testid":"input-song-duration"})}),s.jsx(E,{})]})})]}),s.jsx(D,{control:p.control,name:"audioUrl",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"ملف الصوت"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(L,{type:"file",accept:"audio/*",onChange:d=>{var v;const y=(v=d.target.files)==null?void 0:v[0];y&&pe(y,"audio")},disabled:m.audio,className:"flex-1","data-testid":"input-song-audio-file"}),m.audio&&s.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"})]}),s.jsx(U,{children:s.jsx(L,{placeholder:"أو أدخل رابط ملف الصوت",...n,"data-testid":"input-song-audio-url"})}),(n.value||x.audio)&&s.jsx("div",{className:"p-2 bg-muted rounded border",children:s.jsx("audio",{controls:!0,src:n.value||x.audio||"",className:"w-full",children:"متصفحك لا يدعم تشغيل الصوت"})})]}),s.jsx(E,{})]})}),s.jsx(D,{control:p.control,name:"lyrics",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"كلمات الأغنية (اختياري)"}),s.jsx(U,{children:s.jsx(js,{rows:4,placeholder:"أدخل كلمات الأغنية هنا...",...n,value:n.value||"","data-testid":"textarea-song-lyrics"})}),s.jsx(E,{})]})}),s.jsx(O,{type:"submit",className:"w-full bg-primary text-primary-foreground hover:bg-primary/90",disabled:$e.isPending,"data-testid":"button-upload-song",children:$e.isPending?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"جاري الرفع..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ge,{className:"w-4 h-4 mr-2"}),"رفع الأغنية"]})})]})})})]})}),s.jsx(re,{value:"video",children:s.jsxs(z,{children:[s.jsx(H,{children:s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(He,{className:"w-5 h-5"}),"رفع فيديو جديد"]})}),s.jsx(B,{children:s.jsx(we,{...N,children:s.jsxs("form",{onSubmit:N.handleSubmit(n=>Ke.mutate(n)),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(D,{control:N.control,name:"title",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"عنوان الفيديو"}),s.jsx(U,{children:s.jsx(L,{placeholder:"أدخل عنوان الفيديو",...n,"data-testid":"input-video-title"})}),s.jsx(E,{})]})}),s.jsx(D,{control:N.control,name:"artistId",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"الفنان"}),s.jsxs(Te,{onValueChange:n.onChange,defaultValue:n.value,children:[s.jsx(U,{children:s.jsx(Ie,{"data-testid":"select-video-artist",children:s.jsx(Pe,{placeholder:"اختر الفنان"})})}),s.jsx(Ce,{children:je?s.jsx("div",{className:"p-2",children:"جاري التحميل..."}):T&&Array.isArray(T)?T.map(d=>s.jsx(le,{value:d.id,children:d.name},d.id)):null})]}),s.jsx(E,{})]})}),s.jsx(D,{control:N.control,name:"duration",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"المدة (بالثواني)"}),s.jsx(U,{children:s.jsx(L,{type:"number",placeholder:"180",...n,value:n.value||"",onChange:d=>n.onChange(parseInt(d.target.value)||0),"data-testid":"input-video-duration"})}),s.jsx(E,{})]})}),s.jsx(D,{control:N.control,name:"thumbnailUrl",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"صورة مصغرة للفيديو (اختياري)"}),s.jsx(U,{children:s.jsx(L,{placeholder:"https://example.com/thumbnail.jpg",...n,value:n.value||"","data-testid":"input-video-thumbnail"})}),s.jsx(E,{})]})})]}),s.jsx(D,{control:N.control,name:"videoUrl",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"ملف الفيديو"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(L,{type:"file",accept:"video/*",onChange:d=>{var v;const y=(v=d.target.files)==null?void 0:v[0];y&&pe(y,"video")},disabled:m.video,className:"flex-1","data-testid":"input-video-file"}),m.video&&s.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"})]}),s.jsx(U,{children:s.jsx(L,{placeholder:"أو أدخل رابط ملف الفيديو",...n,"data-testid":"input-video-url"})}),(n.value||x.video)&&s.jsx("div",{className:"p-2 bg-muted rounded border",children:s.jsx("video",{controls:!0,src:n.value||x.video||"",className:"w-full max-h-40",children:"متصفحك لا يدعم تشغيل الفيديو"})})]}),s.jsx(E,{})]})}),s.jsx(O,{type:"submit",className:"w-full bg-primary text-primary-foreground hover:bg-primary/90",disabled:Ke.isPending,"data-testid":"button-upload-video",children:Ke.isPending?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"جاري الرفع..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ge,{className:"w-4 h-4 mr-2"}),"رفع الفيديو"]})})]})})})]})}),s.jsx(re,{value:"artist",children:s.jsxs(z,{children:[s.jsx(H,{children:s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(k,{className:"w-5 h-5"}),"إضافة فنان جديد"]})}),s.jsx(B,{children:s.jsx(we,{...u,children:s.jsxs("form",{onSubmit:u.handleSubmit(n=>Qe.mutate(n)),className:"space-y-4",children:[s.jsx(D,{control:u.control,name:"name",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"اسم الفنان"}),s.jsx(U,{children:s.jsx(L,{placeholder:"أدخل اسم الفنان",...n,"data-testid":"input-artist-name"})}),s.jsx(E,{})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(D,{control:u.control,name:"profileImageUrl",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"صورة الفنان (اختياري)"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(L,{type:"file",accept:"image/*",onChange:d=>{var v;const y=(v=d.target.files)==null?void 0:v[0];y&&pe(y,"image","profileImageUrl")},disabled:m.image,className:"flex-1","data-testid":"input-artist-image-file"}),m.image&&s.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"})]}),s.jsx(U,{children:s.jsx(L,{placeholder:"أو أدخل رابط الصورة",...n,value:n.value||"","data-testid":"input-artist-image"})}),n.value&&s.jsx("div",{className:"p-2 bg-muted rounded border",children:s.jsx("img",{src:n.value,alt:"صورة الفنان",className:"w-20 h-20 object-cover rounded",onError:d=>{d.currentTarget.style.display="none"}})})]}),s.jsx(E,{})]})}),s.jsx(D,{control:u.control,name:"coverImageUrl",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"صورة الغلاف (اختياري)"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(L,{type:"file",accept:"image/*",onChange:d=>{var v;const y=(v=d.target.files)==null?void 0:v[0];y&&pe(y,"image","coverImageUrl")},disabled:m.image,className:"flex-1","data-testid":"input-artist-cover-file"}),m.image&&s.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"})]}),s.jsx(U,{children:s.jsx(L,{placeholder:"أو أدخل رابط صورة الغلاف",...n,value:n.value||"","data-testid":"input-artist-cover"})}),n.value&&s.jsx("div",{className:"p-2 bg-muted rounded border",children:s.jsx("img",{src:n.value,alt:"صورة الغلاف",className:"w-20 h-20 object-cover rounded",onError:d=>{d.currentTarget.style.display="none"}})})]}),s.jsx(E,{})]})})]}),s.jsx(D,{control:u.control,name:"bio",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"نبذة عن الفنان (اختياري)"}),s.jsx(U,{children:s.jsx(js,{rows:3,placeholder:"أدخل نبذة عن الفنان...",...n,value:n.value||"","data-testid":"textarea-artist-bio"})}),s.jsx(E,{})]})}),s.jsx(O,{type:"submit",className:"w-full bg-primary text-primary-foreground hover:bg-primary/90",disabled:Qe.isPending,"data-testid":"button-create-artist",children:Qe.isPending?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"جاري الإنشاء..."]}):s.jsxs(s.Fragment,{children:[s.jsx(k,{className:"w-4 h-4 mr-2"}),"إضافة الفنان"]})})]})})})]})}),s.jsx(re,{value:"album",children:s.jsxs(z,{children:[s.jsx(H,{children:s.jsxs(Y,{className:"flex items-center gap-2",children:[s.jsx(Ye,{className:"w-5 h-5"}),"إضافة ألبوم جديد"]})}),s.jsx(B,{children:s.jsx(we,{...A,children:s.jsxs("form",{onSubmit:A.handleSubmit(n=>Oe.mutate(n)),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(D,{control:A.control,name:"title",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"عنوان الألبوم"}),s.jsx(U,{children:s.jsx(L,{placeholder:"أدخل عنوان الألبوم",...n,"data-testid":"input-album-title"})}),s.jsx(E,{})]})}),s.jsx(D,{control:A.control,name:"artistId",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"الفنان"}),s.jsxs(Te,{onValueChange:n.onChange,defaultValue:n.value||"",children:[s.jsx(U,{children:s.jsx(Ie,{"data-testid":"select-album-artist",children:s.jsx(Pe,{placeholder:"اختر الفنان"})})}),s.jsx(Ce,{children:je?s.jsx("div",{className:"p-2",children:"جاري التحميل..."}):T&&Array.isArray(T)?T.map(d=>s.jsx(le,{value:d.id||"",children:d.name},d.id)):null})]}),s.jsx(E,{})]})})]}),s.jsx(D,{control:A.control,name:"coverImageUrl",render:({field:n})=>s.jsxs(F,{children:[s.jsx(V,{children:"غلاف الألبوم (اختياري)"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(L,{type:"file",accept:"image/*",onChange:d=>{var v;const y=(v=d.target.files)==null?void 0:v[0];y&&pe(y,"image","albumCoverImageUrl")},disabled:m.image,className:"flex-1","data-testid":"input-album-cover-file"}),m.image&&s.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"})]}),s.jsx(U,{children:s.jsx(L,{placeholder:"أو أدخل رابط غلاف الألبوم",...n,value:n.value||"","data-testid":"input-album-cover"})}),n.value&&s.jsx("div",{className:"p-2 bg-muted rounded border",children:s.jsx("img",{src:n.value,alt:"غلاف الألبوم",className:"w-20 h-20 object-cover rounded",onError:d=>{d.currentTarget.style.display="none"}})})]}),s.jsx(E,{})]})}),s.jsx(O,{type:"submit",className:"w-full bg-primary text-primary-foreground hover:bg-primary/90",disabled:Oe.isPending,"data-testid":"button-create-album",children:Oe.isPending?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"جاري الإنشاء..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"w-4 h-4 mr-2"}),"إضافة الألبوم"]})})]})})})]})})]})}),s.jsx(re,{value:"manage",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs(z,{children:[s.jsx(H,{children:s.jsxs(Y,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(k,{className:"w-5 h-5"}),"الفنانين"]}),s.jsx(xe,{variant:"secondary",children:us})]})}),s.jsx(B,{children:je?s.jsx("div",{className:"space-y-2",children:[...Array(3)].map((n,d)=>s.jsx(P,{className:"h-4 w-full"},d))}):s.jsx("div",{className:"space-y-2",children:T&&Array.isArray(T)&&T.length>0?T.slice(0,5).map(n=>s.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-muted rounded",children:[s.jsx("span",{className:"text-sm",children:n.name}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(O,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-blue-500 hover:text-blue-700",onClick:()=>Tl(n),title:"تعديل الفنان",children:s.jsx(ge,{className:"w-3 h-3"})}),s.jsx(O,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:()=>{confirm(`هل أنت متأكد من حذف الفنان "${n.name}"؟`)&&n.id&&hs.mutate(n.id)},disabled:hs.isPending,title:"حذف الفنان",children:s.jsx(Ae,{className:"w-3 h-3"})})]})]},n.id)):s.jsx("p",{className:"text-sm text-muted-foreground",children:"لا يوجد فنانين"})})})]}),s.jsxs(z,{children:[s.jsx(H,{children:s.jsxs(Y,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Xe,{className:"w-5 h-5"}),"الأغاني"]}),s.jsx(xe,{variant:"secondary",children:ds})]})}),s.jsx(B,{children:yl?s.jsx("div",{className:"space-y-2",children:[...Array(3)].map((n,d)=>s.jsx(P,{className:"h-4 w-full"},d))}):s.jsx("div",{className:"space-y-2",children:J&&Array.isArray(J)&&J.length>0?J.slice(0,5).map(n=>s.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-muted rounded",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:n.title}),s.jsx("div",{className:"text-xs text-muted-foreground",children:Ze(n.artistId||"")})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(O,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-blue-500 hover:text-blue-700",onClick:()=>Pl(n),title:"تعديل الأغنية",children:s.jsx(ge,{className:"w-3 h-3"})}),s.jsx(O,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:()=>{confirm(`هل أنت متأكد من حذف الأغنية "${n.title}"؟`)&&n.id&&gs.mutate(n.id)},disabled:gs.isPending,title:"حذف الأغنية",children:s.jsx(Ae,{className:"w-3 h-3"})})]})]},n.id)):s.jsx("p",{className:"text-sm text-muted-foreground",children:"لا توجد أغاني"})})})]}),s.jsxs(z,{children:[s.jsx(H,{children:s.jsxs(Y,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(He,{className:"w-5 h-5"}),"الفيديوهات"]}),s.jsx(xe,{variant:"secondary",children:ms})]})}),s.jsx(B,{children:jl?s.jsx("div",{className:"space-y-2",children:[...Array(3)].map((n,d)=>s.jsx(P,{className:"h-4 w-full"},d))}):s.jsx("div",{className:"space-y-2",children:ie&&Array.isArray(ie)&&ie.length>0?ie.slice(0,5).map(n=>s.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-muted rounded",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:n.title}),s.jsx("div",{className:"text-xs text-muted-foreground",children:Ze(n.artistId||"")})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(O,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-blue-500 hover:text-blue-700",onClick:()=>Cl(n),title:"تعديل الفيديو",children:s.jsx(ge,{className:"w-3 h-3"})}),s.jsx(O,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:()=>{confirm(`هل أنت متأكد من حذف الفيديو "${n.title}"؟`)&&n.id&&xs.mutate(n.id)},disabled:xs.isPending,title:"حذف الفيديو",children:s.jsx(Ae,{className:"w-3 h-3"})})]})]},n.id)):s.jsx("p",{className:"text-sm text-muted-foreground",children:"لا توجد فيديوهات"})})})]}),s.jsxs(z,{children:[s.jsx(H,{children:s.jsxs(Y,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Ye,{className:"w-5 h-5"}),"الألبومات"]}),s.jsx(xe,{variant:"secondary",children:bl})]})}),s.jsx(B,{children:cs?s.jsx("div",{className:"space-y-2",children:[...Array(3)].map((n,d)=>s.jsx(P,{className:"h-4 w-full"},d))}):s.jsx("div",{className:"space-y-2",children:$&&Array.isArray($)&&$.length>0?$.slice(0,5).map(n=>s.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-muted rounded",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:n.title}),s.jsx("div",{className:"text-xs text-muted-foreground",children:Ze(n.artistId||"")})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(O,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-blue-500 hover:text-blue-700",onClick:()=>Il(n),title:"تعديل الألبوم",children:s.jsx(ge,{className:"w-3 h-3"})}),s.jsx(O,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:()=>{confirm(`هل أنت متأكد من حذف الألبوم "${n.title}"؟`)&&n.id&&ps.mutate(n.id)},disabled:ps.isPending,title:"حذف الألبوم",children:s.jsx(Ae,{className:"w-3 h-3"})})]})]},n.id)):s.jsx("p",{className:"text-sm text-muted-foreground",children:"لا توجد ألبومات"})})})]})]})}),s.jsx(re,{value:"stats",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(z,{children:s.jsx(B,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Xe,{className:"h-8 w-8 text-primary"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"إجمالي الأغاني"}),s.jsx("p",{className:"text-2xl font-bold",children:be(ds)})]})]})})}),s.jsx(z,{children:s.jsx(B,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(k,{className:"h-8 w-8 text-green-500"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"إجمالي الفنانين"}),s.jsx("p",{className:"text-2xl font-bold",children:be(us)})]})]})})}),s.jsx(z,{children:s.jsx(B,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(yn,{className:"h-8 w-8 text-blue-500"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"إجمالي المشاهدات"}),s.jsx("p",{className:"text-2xl font-bold",children:be(Nl)})]})]})})}),s.jsx(z,{children:s.jsx(B,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(He,{className:"h-8 w-8 text-red-500"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"إجمالي الفيديوهات"}),s.jsx("p",{className:"text-2xl font-bold",children:be(ms)})]})]})})})]})}),s.jsxs(re,{value:"users",className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsx(z,{children:s.jsx(B,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(k,{className:"h-8 w-8 text-blue-500"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"إجمالي المستخدمين"}),s.jsx("p",{className:"text-2xl font-bold",children:"0"})]})]})})}),s.jsx(z,{children:s.jsx(B,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(k,{className:"h-8 w-8 text-green-500"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"المستخدمين النشطين"}),s.jsx("p",{className:"text-2xl font-bold",children:"0"})]})]})})}),s.jsx(z,{children:s.jsx(B,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(k,{className:"h-8 w-8 text-purple-500"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"المديرين"}),s.jsx("p",{className:"text-2xl font-bold",children:"1"})]})]})})})]}),s.jsxs(z,{children:[s.jsx(H,{children:s.jsxs(Y,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"إدارة المستخدمين"}),s.jsxs(O,{variant:"outline",size:"sm",children:[s.jsx(Nc,{className:"w-4 h-4 mr-2"}),"إضافة مستخدم"]})]})}),s.jsx(B,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center",children:s.jsx(k,{className:"w-5 h-5 text-primary-foreground"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:"أنت (المدير الرئيسي)"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"hidarah@mail.io"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(xe,{variant:"secondary",children:"مدير"}),s.jsx(O,{variant:"ghost",size:"sm",disabled:!0,children:s.jsx(ge,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(k,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"لا يوجد مستخدمين إضافيين"}),s.jsx("p",{className:"text-sm",children:"يمكنك دعوة مستخدمين جدد لإدارة المحتوى معك"})]})]})})]}),s.jsxs(z,{children:[s.jsx(H,{children:s.jsx(Y,{children:"الصلاحيات والأدوار"})}),s.jsx(B,{children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"مدير كامل"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsx("li",{children:"• رفع وإدارة المحتوى"}),s.jsx("li",{children:"• إدارة المستخدمين"}),s.jsx("li",{children:"• عرض الإحصائيات"}),s.jsx("li",{children:"• حذف وتعديل المحتوى"})]})]}),s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"محرر محتوى"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsx("li",{children:"• رفع الأغاني والفيديوهات"}),s.jsx("li",{children:"• تعديل المحتوى الخاص"}),s.jsx("li",{children:"• عرض الإحصائيات الأساسية"}),s.jsx("li",{children:"• إدارة قوائم التشغيل"})]})]})]})})})]})]})]})]})})}const Bd=M.lazy(()=>qe(()=>import("./TrendingSection-DwpXB3qp.js"),__vite__mapDeps([0,1,2,3,4]))),Md=M.lazy(()=>qe(()=>import("./ArtistsSection-BXvaBb9L.js"),__vite__mapDeps([5,1,2,3,4]))),Qd=M.lazy(()=>qe(()=>import("./VideoGallery-D_86Ac51.js"),__vite__mapDeps([6,1,2,3,7,8,9,4,10]))),Od=M.lazy(()=>qe(()=>import("./PlaylistsSection-B9WXYM2l.js"),__vite__mapDeps([11,1,2,7,8,9,12,13,14,3,15,16,17,18,19,20,21,22,23,24,25,26,27,28])));function $d(){fn();const{isLoading:r}=xn();return r?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-foreground font-medium",children:"جاري التحميل..."})]})}):s.jsxs("div",{className:"flex min-h-screen bg-background",children:[s.jsx(Ll,{}),s.jsxs("main",{className:"flex-1 overflow-y-auto pb-32",children:[s.jsx(Fc,{}),s.jsx("section",{className:"p-6",children:s.jsxs("div",{className:"relative rounded-2xl overflow-hidden gradient-bg p-8 text-white",children:[s.jsxs("div",{className:"relative z-10",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"مرحباً بك في MusicHub"}),s.jsx("p",{className:"text-lg opacity-90 mb-6",children:"اكتشف أحدث الأغاني والفنانين المفضلين لديك"}),s.jsxs("button",{className:"bg-white/20 backdrop-blur-sm border border-white/30 px-6 py-3 rounded-xl hover:bg-white/30 transition-all hover-scale flex items-center gap-2",children:[s.jsx(yn,{className:"w-4 h-4"}),"ابدأ الاستماع"]})]}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/20 to-transparent"})]})}),s.jsx("section",{className:"px-6 mb-8",children:s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-card rounded-xl p-4 hover:bg-muted transition-colors cursor-pointer hover-scale",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center",children:s.jsx(Vl,{className:"w-6 h-6 text-green-500"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"الأغاني المفضلة"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"قائمة مفضلاتك"})]})]})}),s.jsx("div",{className:"bg-card rounded-xl p-4 hover:bg-muted transition-colors cursor-pointer hover-scale",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center",children:s.jsx(wc,{className:"w-6 h-6 text-blue-500"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"تم تشغيلها مؤخراً"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"آخر الأغاني"})]})]})}),s.jsx("div",{className:"bg-card rounded-xl p-4 hover:bg-muted transition-colors cursor-pointer hover-scale",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center",children:s.jsx(Ul,{className:"w-6 h-6 text-purple-500"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"قوائم التشغيل"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"قوائمك الخاصة"})]})]})}),s.jsx("div",{className:"bg-card rounded-xl p-4 hover:bg-muted transition-colors cursor-pointer hover-scale",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center",children:s.jsx(_c,{className:"w-6 h-6 text-red-500"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"الأكثر شعبية"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"المتداولة الآن"})]})]})})]})}),s.jsx(M.Suspense,{fallback:s.jsxs("section",{className:"px-6 mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx(P,{className:"h-8 w-48"}),s.jsx(P,{className:"h-8 w-24"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:[...Array(5)].map((e,t)=>s.jsxs("div",{className:"space-y-3",children:[s.jsx(P,{className:"w-full aspect-square rounded-xl"}),s.jsx(P,{className:"h-4 w-3/4"}),s.jsx(P,{className:"h-3 w-1/2"})]},t))})]}),children:s.jsx(Bd,{})}),s.jsx(M.Suspense,{fallback:s.jsxs("section",{className:"px-6 mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx(P,{className:"h-8 w-32"}),s.jsx(P,{className:"h-8 w-24"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6",children:[...Array(6)].map((e,t)=>s.jsxs("div",{className:"space-y-3",children:[s.jsx(P,{className:"w-full aspect-square rounded-full"}),s.jsx(P,{className:"h-4 w-3/4 mx-auto"})]},t))})]}),children:s.jsx(Md,{})}),s.jsx(M.Suspense,{fallback:s.jsxs("section",{className:"px-6 mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx(P,{className:"h-8 w-40"}),s.jsx(P,{className:"h-8 w-24"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>s.jsxs("div",{className:"space-y-3",children:[s.jsx(P,{className:"w-full aspect-video rounded-xl"}),s.jsx(P,{className:"h-4 w-3/4"}),s.jsx(P,{className:"h-3 w-1/2"})]},t))})]}),children:s.jsx(Qd,{})}),s.jsx(M.Suspense,{fallback:s.jsxs("section",{className:"px-6 mb-8",children:[s.jsx(P,{className:"h-8 w-48 mb-6"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(3)].map((e,t)=>s.jsx(P,{className:"h-32 w-full rounded-xl"},t))})]}),children:s.jsx(Od,{})})]}),s.jsx(El,{}),s.jsx(zd,{})]})}const ou=Object.freeze(Object.defineProperty({__proto__:null,default:$d},Symbol.toStringTag,{value:"Module"}));export{_c as F,ou as H};
