import{a as f,Y as N,d as v,j as e,H as m,B as n,P as x,M as h,g as b}from"./index-BEosjvFY.js";import{C as y,c as w}from"./card-DjIf65r2.js";import{S as k}from"./Sidebar-DlaXlCOU.js";import{D as u}from"./download-CXu8oPbW.js";import{C}from"./search-DeohbOdD.js";import{T as S}from"./trash-2-Bn_GtgkO.js";import"./users-CyOdMYj1.js";import"./disc-bvSIxYzJ.js";import"./video-B9ELjgIP.js";import"./log-in-C_8GnUY0.js";function P(t){const r=Math.floor(t/60),i=t%60;return`${r}:${i.toString().padStart(2,"0")}`}function g(t){return t>=1e6?(t/1e6).toFixed(1)+" مليون":t>=1e3?(t/1e3).toFixed(1)+" ألف":t.toString()}function M(t){const r=t.reduce((c,l)=>c+(l.duration||0),0),i=Math.floor(r/3600),a=Math.floor(r%3600/60);return i>0?`${i} ساعة ${a} دقيقة`:`${a} دقيقة`}function H(){const{user:t}=f(),{setCurrentSong:r,setIsPlaying:i}=N(),{data:a=[],isLoading:c}=v({queryKey:["/api/favorites"],enabled:!!t}),l=(s,d)=>{s.audioUrl&&(r({id:s.id,title:s.title,artistId:s.artistId,audioUrl:s.audioUrl,duration:s.duration||0}),i(!0))},j=()=>{a.length>0&&a[0].song.audioUrl&&l(a[0].song,a[0].artist)},p=async s=>{console.log("Remove from favorites:",s)};return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsx(k,{}),e.jsxs("main",{className:"flex-1 mr-64 mb-24 overflow-y-auto",children:[e.jsxs("div",{className:"relative h-80 bg-gradient-to-b from-red-500/20 to-background",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),e.jsx("div",{className:"relative h-full flex items-end p-8",children:e.jsxs("div",{className:"flex items-end space-x-6",children:[e.jsx("div",{className:"w-56 h-56 bg-gradient-to-br from-red-500 to-pink-600 rounded-lg shadow-2xl flex items-center justify-center",children:e.jsx(m,{className:"w-24 h-24 text-white"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary font-medium mb-2",children:"قائمة التشغيل"}),e.jsx("h1",{className:"text-5xl font-bold text-white mb-2","data-testid":"text-favorites-title",children:"أغانيي المفضلة"}),e.jsx("p",{className:"text-white/80",children:(t==null?void 0:t.displayName)||(t==null?void 0:t.email)||"المستخدم"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(n,{size:"lg",className:"bg-primary hover:bg-primary/90",onClick:j,disabled:a.length===0,"data-testid":"button-play-all",children:[e.jsx(x,{className:"w-5 h-5 mr-2"}),"تشغيل الكل"]}),e.jsxs(n,{variant:"outline",size:"lg","data-testid":"button-download-all",children:[e.jsx(u,{className:"w-5 h-5 mr-2"}),"تحميل الكل"]})]}),e.jsxs("div",{className:"flex items-center space-x-6 text-white/80",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(h,{className:"w-4 h-4"}),e.jsxs("span",{children:[a.length," أغنية"]})]}),a.length>0&&e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{children:M(a.map(s=>s.song))})]})]})]})]})})]}),e.jsx("div",{className:"p-8",children:c?e.jsx("div",{className:"space-y-4",children:Array.from({length:8}).map((s,d)=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-muted rounded-lg animate-pulse",children:[e.jsx("div",{className:"w-8 h-4 bg-background rounded"}),e.jsx("div",{className:"w-16 h-16 bg-background rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-background rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-background rounded w-1/4"})]}),e.jsx("div",{className:"w-12 h-4 bg-background rounded"})]},d))}):a.length===0?e.jsx(y,{children:e.jsxs(w,{className:"p-12 text-center",children:[e.jsx(m,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"لا توجد أغاني مفضلة"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"ابدأ بإضافة أغانيك المفضلة بالضغط على أيقونة القلب بجانب أي أغنية."}),e.jsx(n,{variant:"outline",children:"استكشف الموسيقى"})]})}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-[auto,1fr,auto,auto,auto] gap-4 px-4 py-2 text-sm text-muted-foreground border-b",children:[e.jsx("div",{className:"w-8",children:"#"}),e.jsx("div",{children:"العنوان"}),e.jsx("div",{className:"text-center",children:"الفنان"}),e.jsx("div",{className:"text-center",children:"الاستماع"}),e.jsx("div",{className:"text-center",children:"المدة"})]}),a.map((s,d)=>e.jsxs("div",{className:"grid grid-cols-[auto,1fr,auto,auto,auto] gap-4 p-4 rounded-lg hover:bg-muted transition-colors group cursor-pointer",onClick:()=>l(s.song,s.artist),"data-testid":`favorite-item-${s.song.id}`,children:[e.jsx("div",{className:"w-8 text-center text-muted-foreground group-hover:hidden flex items-center justify-center",children:d+1}),e.jsx(n,{size:"sm",variant:"ghost",className:"w-8 h-8 hidden group-hover:flex items-center justify-center",children:e.jsx(x,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-center space-x-4 min-w-0",children:[e.jsx("div",{className:"w-12 h-12 bg-muted rounded overflow-hidden flex-shrink-0",children:s.song.imageUrl?e.jsx("img",{src:s.song.imageUrl,alt:s.song.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(h,{className:"w-4 h-4 text-muted-foreground"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-medium truncate","data-testid":`text-song-title-${s.song.id}`,children:s.song.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[g(s.song.playCount)," تشغيل"]})]})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:"text-sm text-muted-foreground",children:s.artist.name})}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:g(s.song.playCount)}),e.jsx(n,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-600",onClick:o=>{o.stopPropagation(),p(s.song.id)},children:e.jsx(S,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.song.duration&&e.jsx("span",{className:"text-sm text-muted-foreground",children:P(s.song.duration)}),e.jsx(n,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100",onClick:o=>o.stopPropagation(),children:e.jsx(u,{className:"w-4 h-4"})})]})]},s.song.id))]})})]}),e.jsx(b,{})]})}export{H as default};
